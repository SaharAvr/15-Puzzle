(this["webpackJsonp15-puzzle"]=this["webpackJsonp15-puzzle"]||[]).push([[0],{30:function(e,t,a){e.exports={board:"Board_board__29-vl",tile:"Board_tile__3Ymhw",empty:"Board_empty__1gxMu",top:"Board_top__Ic1aJ",moveTop:"Board_moveTop__3xhjx",right:"Board_right__2_HCr",moveRight:"Board_moveRight__2By8J",bottom:"Board_bottom__1xtci",moveBottom:"Board_moveBottom__3gVCX",left:"Board_left__1L6g6",moveLeft:"Board_moveLeft__2oT5I",withCheats:"Board_withCheats__2v4dd",flicker:"Board_flicker__2CAXw",selected:"Board_selected__S5A-n",fadeIn:"Board_fadeIn__2lzj2",fadeInBottomTop:"Board_fadeInBottomTop__1-zR8",fadeInLeftRight:"Board_fadeInLeftRight__32TLr"}},36:function(e,t,a){e.exports={stats:"Stats_stats__3gBwN",actions:"Stats_actions__1QOC0",restartButton:"Stats_restartButton__1UNvd",pauseButton:"Stats_pauseButton__1pDxZ",resumeButton:"Stats_resumeButton__2_GFM",fadeIn:"Stats_fadeIn__Zoumi",fadeInBottomTop:"Stats_fadeInBottomTop__bVIlK",fadeInLeftRight:"Stats_fadeInLeftRight__1u6oK",flicker:"Stats_flicker__2qIBR"}},40:function(e,t,a){e.exports={animatedButton:"AnimatedButton_animatedButton__1SurT",animatedButtonInnerWrapper:"AnimatedButton_animatedButtonInnerWrapper__1RucT",animatedButtonBgContainer:"AnimatedButton_animatedButtonBgContainer__E2Lzh",disabled:"AnimatedButton_disabled__34BNW",fadeIn:"AnimatedButton_fadeIn__3rQW2",fadeInBottomTop:"AnimatedButton_fadeInBottomTop__2_raM",fadeInLeftRight:"AnimatedButton_fadeInLeftRight__1qWH9",flicker:"AnimatedButton_flicker__2D1cG"}},41:function(e,t,a){e.exports={gamePage:"GamePage_gamePage__RkYJb",fadeIn:"GamePage_fadeIn__1W9Zx",puzzleSolved:"GamePage_puzzleSolved__2oQkb",gamePaused:"GamePage_gamePaused__v3GrE",stats:"GamePage_stats__zYTP1",fadeInBottomTop:"GamePage_fadeInBottomTop__3i44h",fadeInLeftRight:"GamePage_fadeInLeftRight__lVcuh",flicker:"GamePage_flicker__1dmU7"}},49:function(e,t,a){e.exports={leaderboardPage:"LeaderboardPage_leaderboardPage__1VFxE",withFade:"LeaderboardPage_withFade__2YmSN",fadeInBottomTop:"LeaderboardPage_fadeInBottomTop__1VgP3",fadeIn:"LeaderboardPage_fadeIn__G-A7Z",actionButton:"LeaderboardPage_actionButton__3KS0i",fadeInLeftRight:"LeaderboardPage_fadeInLeftRight__183ml",flicker:"LeaderboardPage_flicker__1sT0C"}},52:function(e,t,a){e.exports={mainPage:"MainPage_mainPage__JXrbz",inputWrapper:"MainPage_inputWrapper__3mTBc",fadeIn:"MainPage_fadeIn__bB1cu",fadeInBottomTop:"MainPage_fadeInBottomTop__3NoA8",fadeInLeftRight:"MainPage_fadeInLeftRight__2XBc-",flicker:"MainPage_flicker__32H5o"}},72:function(e,t,a){e.exports={fadeIn:"index_fadeIn__38lkY",fadeInBottomTop:"index_fadeInBottomTop__2JA79",fadeInLeftRight:"index_fadeInLeftRight__7Tlft",flicker:"index_flicker__1MeR_"}},82:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),o=a.n(r),s=(a(72),a(10)),i=a(43),u=a(9),l=a(61),d=a(58),f=a(13),b=a(18),m=a.n(b),j=a(16),_=a(5),O=a.n(_),h=a(40),p=a.n(h),v=a(1),x=c.a.forwardRef((function(e,t){var a=e.className,n=e.text,c=e.onClick,r=e.href,o=e.disabled;return Object(v.jsx)("div",{className:m()(p.a.animatedButton,a,Object(j.a)({},p.a.disabled,o)),children:Object(v.jsxs)("div",{className:p.a.animatedButtonInnerWrapper,children:[Object(v.jsx)("div",{className:p.a.animatedButtonBgContainer}),Object(v.jsx)("button",{children:Object(v.jsx)("a",{href:r,ref:t,onClick:c,role:"none",children:n})})]})})}));x.defaultProps={className:"",text:"",onClick:function(){},href:null,disabled:!1},x.propTypes={className:O.a.string,text:O.a.string,onClick:O.a.func,href:O.a.string,disabled:O.a.bool};var g=x,B="/",I="/game",C="/leaderboard",k=function(e){return e.username},P=function(e){return e.isGameMode},S=function(e){return e.isPaused},y=function(e){return e.moves},N=function(e){return e.time},T=a(23),R={setUsername:Object(T.a)("setUsername"),setIsGameMode:Object(T.a)("setIsGameMode"),setIsPaused:Object(T.a)("setIsPaused"),setMoves:Object(T.a)("setMoves"),setTime:Object(T.a)("setTime")},M=a(52),E=a.n(M),L=function(){var e=Object(s.b)(),t=Object(s.c)(k),a=c.a.useRef(),n=c.a.useRef(),r=c.a.useState(!1),o=Object(f.a)(r,2),i=o[0],u=o[1],l=null===t||void 0===t?void 0:t.length,d=!l&&!i,b=c.a.useCallback((function(){e(R.setUsername(null))}),[e]),j=c.a.useCallback((function(){a.current&&a.current.focus()}),[]),_=c.a.useCallback((function(e){e.preventDefault(),n.current&&n.current.click()}),[]);return c.a.useEffect(j,[j]),c.a.useEffect(b,[b]),Object(v.jsx)("main",{className:E.a.mainPage,children:Object(v.jsxs)("form",{onSubmit:_,children:[Object(v.jsx)("h1",{children:"15 Puzzle"}),Object(v.jsxs)("div",{className:m()(E.a.inputWrapper,{withError:d}),"data-validate":"Username is reauired",children:[Object(v.jsx)("input",{type:"text",name:"username",placeholder:"Type your username",onChange:function(t){return e(R.setUsername(t.target.value))},onFocus:function(){return u(!0)},onBlur:function(){return u(!1)},ref:a}),Object(v.jsx)("span",{"data-symbol":"\uf206"})]}),Object(v.jsx)(g,{text:"Start Game",href:I,ref:n,disabled:!l})]})})},w=a(32),A=a.n(w),G=a(38),z=a(59),D=a.n(z),F=a(2),U=a.n(F),W=a(111),J=a(110),q=a(109),V=a(107),Y=a(108),H=a(106),X=function(e){var t=e.title,a=e.body,n=e.confirmButton,r=e.discardButton,o=e.delayMS,s=U.a.isNumber(o)&&o>0,i=c.a.useState(!s),u=Object(f.a)(i,2),l=u[0],d=u[1],b=c.a.useCallback((function(){s&&setTimeout((function(){d(!0)}),o)}),[o,s]),m=c.a.useCallback((function(){d(!1),U.a.isFunction(null===n||void 0===n?void 0:n.onClick)&&n.onClick.apply(n,arguments)}),[n]),j=c.a.useCallback((function(){d(!1),U.a.isFunction(null===r||void 0===r?void 0:r.onClick)&&r.onClick.apply(r,arguments)}),[r]);return c.a.useEffect(b,[b]),Object(v.jsxs)(J.a,{open:l,onClose:function(){return d(!1)},children:[Object(v.jsx)(H.a,{id:"alert-dialog-title",children:t||""}),Object(v.jsx)(V.a,{children:Object(v.jsx)(Y.a,{id:"alert-dialog-description",children:a||""})}),(n||r)&&Object(v.jsxs)(q.a,{children:[r&&Object(v.jsx)(W.a,{onClick:j,color:"primary",children:r.text||""}),n&&Object(v.jsx)(W.a,{onClick:m,color:"primary",autoFocus:!0,children:n.text||""})]})]})};X.defaultProps={title:"",body:"",confirmButton:null,discardButton:null,delayMS:0};var Z=X,K=U.a.reduce({CONFIGURATION:"/configuration",RECORD:"/record",LEADERBOARD:"/leaderboard"},(function(e,t,a){return e[a]="".concat("https://fifteen-puzzle-server.herokuapp.com/api").concat(t),e}),{}),Q=function(e){return U.a.replace(new Date(e).toUTCString(),/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},$=a(36),ee=a.n($),te=function(e){var t,a=e.className,n=e.restartGame,r=Object(s.b)(),o=Object(s.c)(y),i=Object(s.c)(P),u=Object(s.c)(S),l=c.a.useRef(i&&!u),d=c.a.useMemo((function(){return Date.now()}),[]),b=c.a.useState(),_=Object(f.a)(b,2),O=_[0],h=_[1],p=c.a.useState(0),x=Object(f.a)(p,2),B=x[0],I=x[1],C=Object(s.c)(N),k=c.a.useCallback((function(){setTimeout((function(){l.current&&r(R.setTime(Date.now()-d-B))}),500)}),[r,d,B]),T=c.a.useCallback((function(){l.current=i&&!u}),[i,u]),M=c.a.useCallback((function(){h(Date.now()),r(R.setIsPaused(!0))}),[r]),E=c.a.useCallback((function(){I(B+(Date.now()-O)),r(R.setIsPaused(!1))}),[r,O,B]);return c.a.useEffect(k,[k,C]),c.a.useEffect(T,[T]),Object(v.jsxs)("div",{className:m()(ee.a.stats,a),children:[Object(v.jsxs)("div",{className:ee.a.actions,children:[Object(v.jsx)(g,{className:ee.a.restartButton,text:"Restart",onClick:n}),Object(v.jsx)(g,{className:m()((t={},Object(j.a)(t,ee.a.pauseButton,!u),Object(j.a)(t,ee.a.resumeButton,u),t)),text:u?"Resume":"Pause",onClick:u?E:M,disabled:!i})]}),Object(v.jsxs)("span",{children:[Object(v.jsx)("h4",{children:Q(C)}),Object(v.jsx)("h4",{children:"Moves: ".concat(o)})]})]})};te.defaultProps={className:"",restartGame:function(){}};var ae=te,ne=a(22),ce=a(29),re={SWAP:"swap"},oe=U.a.chain(re).values().map((function(e){return U.a.size(e)})).max().value(),se=function(){var e=c.a.useState(),t=Object(f.a)(e,2),a=t[0],n=t[1],r=c.a.useState(""),o=Object(f.a)(r,2),s=o[0],i=o[1],u=c.a.useRef(s),l=c.a.useRef(),d=c.a.useCallback((function(){var e=document.addEventListener("keydown",(function(e){var t=e.key,a="".concat(u.current).concat(U.a.toLower(t)),n=a.substring(U.a.size(a)-oe);i(n),u.current=n}));return function(){return document.removeEventListener("keydown",e)}}),[]),b=c.a.useCallback((function(){if(a){if(!new RegExp(".*".concat(a.name,".*"),"i").test(s))return;return console.log("[CHEAT MODE OFF]"),n(null),void i("")}if(s){var e=U.a.find(re,(function(e){return new RegExp(".*".concat(e,".*")).test(s)}));e&&(console.log("CHEATER... ==> ".concat(U.a.toUpper(e))),n({name:e,data:null}),i(""))}}),[a,s]),m=c.a.useCallback((function(e){n(Object(ne.a)(Object(ne.a)({},a),{},{data:e}))}),[a]),j=c.a.useCallback((function(){s&&(l.current&&(clearTimeout(l.current),l.current=null),l.current=setTimeout((function(){i(""),u.current=""}),3e3))}),[s]);return c.a.useEffect(d,[d]),c.a.useEffect(b,[b]),c.a.useEffect(j,[j]),{activeCheat:a,setActiveCheatData:m}};se.cheats=re;var ie=se,ue=a(30),le=a.n(ue),de=Math.pow(4,2),fe=Math.pow(6,2),be=(U.a.times(fe,(function(){return-1})),U.a.times(de,(function(e){return e}))),me=U.a.times(de,(function(e){return(e+1)%de})),je="top",_e="right",Oe="bottom",he="left",pe=function(e){return 6*(Math.floor(e/4)+1)+(e%4+1)},ve=function(e){return 4*(Math.floor(e/6)-1)+(e%6-1)},xe=function(e){var t=e.initialConfiguration,a=e.onSolveCallback,n=ie(),r=n.activeCheat,o=n.setActiveCheatData,i=Object(s.b)(),l=Object(u.g)(),d=Object(s.c)(y),b=c.a.useMemo((function(){return U.a.isArray(t)&&U.a.chain(t).sortBy().isEqual(be).value()}),[t]),_=c.a.useMemo((function(){return e=t,U.a.map(e,(function(e){return{value:e,className:0===e?le.a.empty:""}}));var e}),[t]),O=c.a.useState(_),h=Object(f.a)(O,2),p=h[0],x=h[1],g=c.a.useState(),I=Object(f.a)(g,2),C=I[0],k=I[1],P=c.a.useCallback((function(){b||l.push(B)}),[l,b]),S=c.a.useCallback((function(){b&&i(R.setIsGameMode(!0))}),[i,b]),N=c.a.useCallback((function(){i(R.setIsGameMode(!1)),a()}),[i,a]),T=c.a.useCallback((function(e){var t=U.a.findIndex(p,(function(e){return 0===e.value})),a=function(e){var t,a=e.tileIndex,n=e.emptyTileIndex,c=e.includeCurrentIndex,r=pe(a),o=pe(n),s=Math.floor((r-6)/6),i=4-r%6,u=Math.floor((fe-6-r)/6),l=r%6-1,d=o<r?o<r-l?je:he:o>r?o>r+i?Oe:_e:void 0,f=!1;if(d===je&&(t=U.a.chain(s).times((function(e){if(!f){var t=ve(r-6*(e+1));if(t!==n)return t;f=!0}})).compact().value()),d===_e&&(t=U.a.chain(i).times((function(e){if(!f){var t=ve(r+(e+1));if(t!==n)return t;f=!0}})).compact().value()),d===Oe&&(t=U.a.chain(u).times((function(e){if(!f){var t=ve(r+6*(e+1));if(t!==n)return t;f=!0}})).compact().value()),d===he&&(t=U.a.chain(l).times((function(e){if(!f){var t=ve(r-(e+1));if(t!==n)return t;f=!0}})).compact().value()),f)return c&&t.unshift(a),{side:d,indexes:t}}({tileIndex:e,emptyTileIndex:t,includeCurrentIndex:!0})||{};if(!U.a.isEmpty(a)){var n=a.side,c=a.indexes,r=function(){var e=Object(ce.a)(p);return U.a.forEach(c,(function(t){e[t].className=le.a[n]})),e}(),o=function(){var e=Object(ce.a)(p),a=U.a.size(c);return U.a.forEach(c,(function(n,r){0===r&&(e[n]={value:0,className:le.a.empty}),r<a-1?e[c[r+1]]=Object(ne.a)(Object(ne.a)({},p[n]),{},{className:""}):e[t]=Object(ne.a)(Object(ne.a)({},p[n]),{},{className:""})})),e}();return x(r),k(o),i(R.setMoves(d+1)),o}}),[p,i,d]),M=c.a.useCallback((function(e,t){var a=Object(ce.a)(p);return a[e]=Object(ne.a)(Object(ne.a)({},p[t]),{},{className:""}),a[t]=Object(ne.a)(Object(ne.a)({},p[e]),{},{className:""}),k(a),i(R.setMoves(d+1)),a}),[p,i,d]),E=c.a.useCallback((function(e){var t=Number(e.target.dataset.tileIndex);if(!(0===Number(e.target.dataset.tileValue))){var a,n=function(){if(!r)return T(t);var e=r||{},a=e.name,n=e.data;if(a===ie.cheats.SWAP){if(!(!U.a.isNil(n)&&n!==t)){var c=Object(ce.a)(p);return c[t].className=le.a.selected,x(c),void o(t)}var s=M(t,n);return o(null),x(s),s}return p}();U.a.isEqual((a=n,U.a.map(a,"value")),me)&&N()}}),[r,p,T,N,o,M]);return c.a.useEffect(P,[P]),c.a.useEffect(S,[S]),Object(v.jsx)("div",{className:le.a.board,"data-id":"board",children:U.a.map(p,(function(e,t){var a=e.value,n=e.className;return Object(v.jsx)("div",{role:"none","data-tile-index":t,"data-tile-value":a,onClick:E,className:m()(le.a.tile,n,Object(j.a)({},le.a.withCheats,!U.a.isNil(r))),onAnimationEnd:function(){x(C)},children:a},U.a.uniqueId(t))}))})};xe.defaultProps={initialConfiguration:[],onSolveCallback:function(){}};var ge,Be,Ie=c.a.memo(xe),Ce=a(41),ke=a.n(Ce),Pe=function(){var e,t=Object(s.b)(),a=Object(u.g)(),n=Object(s.d)(),r=Object(s.c)(k),o=Object(s.c)(S),i=c.a.useState(),l=Object(f.a)(i,2),d=l[0],b=l[1],_=c.a.useState(!1),O=Object(f.a)(_,2),h=O[0],p=O[1],x=c.a.useCallback((function(){r||a.push(B)}),[a,r]),g=c.a.useCallback(Object(G.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(K.CONFIGURATION,{"Content-Type":"application/json"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data,b(n);case 8:case"end":return e.stop()}}),e)}))),[]),I=c.a.useCallback((function(){t(R.setIsGameMode(!1)),t(R.setIsPaused(!1)),t(R.setMoves(0)),t(R.setTime(0)),p(!1),b(null),g()}),[t,g]),P=c.a.useCallback(Object(G.a)(A.a.mark((function e(){var t,a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),t=n.getState(),a=y(t),c=N(t),e.next=6,fetch(K.RECORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{username:r,moves:a,time:c}})});case 6:case"end":return e.stop()}}),e)}))),[n,r]),T=c.a.useCallback((function(){a.push(C)}),[a]);return c.a.useEffect(x,[x]),c.a.useEffect(I,[I]),Object(v.jsxs)("main",{className:m()(ke.a.gamePage,(e={},Object(j.a)(e,ke.a.puzzleSolved,h),Object(j.a)(e,ke.a.gamePaused,o),e)),children:[Object(v.jsx)("h1",{children:d?"Game on, ".concat(r,"!"):"Loading..."}),d&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ae,{className:ke.a.stats,restartGame:I}),Object(v.jsx)(Ie,{initialConfiguration:d,onSolveCallback:P})]}),h&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(D.a,{gravity:.4,run:!0,numberOfPieces:400}),Object(v.jsx)(Z,{title:"Amazing!",body:"You finally solved it... Much respect",confirmButton:{text:"Play again!",onClick:I},discardButton:{text:"Go to leaderboard",onClick:T},delayMS:2e3})]})]})},Se=a(49),ye=a.n(Se),Ne=function(){var e=Object(s.c)(k),t=e?"Play Again":"Play",a=e?I:B,n=c.a.useState(),r=Object(f.a)(n,2),o=r[0],i=r[1],u=c.a.useCallback(Object(G.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(K.LEADERBOARD);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data,i(n);case 8:case"end":return e.stop()}}),e)}))),[]);return c.a.useEffect(u,[u]),Object(v.jsxs)("main",{className:ye.a.leaderboardPage,children:[Object(v.jsx)("h1",{className:m()(Object(j.a)({},ye.a.withFade,o&&!U.a.isEmpty(o))),children:o?"Leaderboard":"Loading..."}),o&&(U.a.isEmpty(o)?Object(v.jsx)("h3",{children:"No stats yet... Better hurry up and play!"}):Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Username"}),Object(v.jsx)("th",{children:"Moves"}),Object(v.jsx)("th",{children:"Time"})]})}),Object(v.jsx)("tbody",{children:U.a.map(o,(function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.username}),Object(v.jsx)("td",{children:e.moves}),Object(v.jsx)("td",{children:Q(e.time)})]},U.a.uniqueId(e.username))}))})]})),o&&Object(v.jsx)(g,{className:ye.a.actionButton,text:t,href:a})]})},Te=a(28),Re=a(55),Me=a(60),Ee=a.n(Me),Le=Object(Te.b)({username:Object(T.b)(R.setUsername,{defaultState:null}),isGameMode:Object(T.b)(R.setIsGameMode,{defaultState:!1}),isPaused:Object(T.b)(R.setIsPaused,{defaultState:!1}),moves:Object(T.b)(R.setMoves,{defaultState:0}),time:Object(T.b)(R.setTime,{defaultState:0})}),we={key:"root",version:"1",storage:Ee.a},Ae=function(){if(!ge||!Be){var e=Object(Re.a)(we,Le);ge=Object(Te.c)(e,{},(t=[],Te.a.apply(void 0,Object(ce.a)(t)))),Be=Object(Re.b)(ge)}var t;return{store:ge,persistor:Be}}(),Ge=Ae.store,ze=Ae.persistor,De=Object(l.hot)((function(){return Object(v.jsx)(s.a,{store:Ge,children:Object(v.jsx)(d.a,{loading:null,persistor:ze,children:Object(v.jsx)(i.a,{children:Object(v.jsxs)(u.d,{children:[Object(v.jsx)(u.b,{path:B,exact:!0,component:L}),Object(v.jsx)(u.b,{path:I,exact:!0,component:Pe}),Object(v.jsx)(u.b,{path:C,exact:!0,component:Ne}),Object(v.jsx)(u.a,{to:B})]})})})})}));o.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(De,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.1a0f06a4.chunk.js.map