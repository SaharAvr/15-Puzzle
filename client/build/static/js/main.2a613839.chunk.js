(this["webpackJsonp15-puzzle"]=this["webpackJsonp15-puzzle"]||[]).push([[0],{33:function(e,t,a){e.exports={stats:"Stats_stats__1IUkc",actions:"Stats_actions__2IFRh",restartButton:"Stats_restartButton__D5qSn",pauseButton:"Stats_pauseButton__1zDLY",resumeButton:"Stats_resumeButton__DdX4D",fadeIn:"Stats_fadeIn__NZRyw",fadeInBottomTop:"Stats_fadeInBottomTop__281pc",fadeInLeftRight:"Stats_fadeInLeftRight__1d-jt"}},38:function(e,t,a){e.exports={animatedButton:"AnimatedButton_animatedButton__1SurT",animatedButtonInnerWrapper:"AnimatedButton_animatedButtonInnerWrapper__1RucT",animatedButtonBgContainer:"AnimatedButton_animatedButtonBgContainer__E2Lzh",disabled:"AnimatedButton_disabled__34BNW",fadeIn:"AnimatedButton_fadeIn__3rQW2",fadeInBottomTop:"AnimatedButton_fadeInBottomTop__2_raM",fadeInLeftRight:"AnimatedButton_fadeInLeftRight__1qWH9"}},39:function(e,t,a){e.exports={gamePage:"GamePage_gamePage__RkYJb",fadeIn:"GamePage_fadeIn__1W9Zx",puzzleSolved:"GamePage_puzzleSolved__2oQkb",gamePaused:"GamePage_gamePaused__v3GrE",stats:"GamePage_stats__zYTP1",fadeInBottomTop:"GamePage_fadeInBottomTop__3i44h",fadeInLeftRight:"GamePage_fadeInLeftRight__lVcuh"}},47:function(e,t,a){e.exports={board:"Board_board__2S2tZ",tile:"Board_tile__17Cgp",empty:"Board_empty__37PVI",fadeIn:"Board_fadeIn__1yWUA",fadeInBottomTop:"Board_fadeInBottomTop__3R-1Y",fadeInLeftRight:"Board_fadeInLeftRight__SPWXL"}},50:function(e,t,a){e.exports={mainPage:"MainPage_mainPage__JXrbz",inputWrapper:"MainPage_inputWrapper__3mTBc",fadeIn:"MainPage_fadeIn__bB1cu",fadeInBottomTop:"MainPage_fadeInBottomTop__3NoA8",fadeInLeftRight:"MainPage_fadeInLeftRight__2XBc-"}},53:function(e,t,a){e.exports={leaderboardPage:"LeaderboardPage_leaderboardPage__1VFxE",fadeIn:"LeaderboardPage_fadeIn__G-A7Z",actionButton:"LeaderboardPage_actionButton__3KS0i",fadeInBottomTop:"LeaderboardPage_fadeInBottomTop__1VgP3",fadeInLeftRight:"LeaderboardPage_fadeInLeftRight__183ml"}},71:function(e,t,a){e.exports={fadeIn:"index_fadeIn__38lkY",fadeInBottomTop:"index_fadeInBottomTop__2JA79",fadeInLeftRight:"index_fadeInLeftRight__7Tlft"}},81:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(11),r=a.n(s),o=(a(71),a(10)),i=a(41),u=a(9),d=a(60),l=a(57),f=a(15),b=a(22),j=a.n(b),m=a(24),_=a(5),O=a.n(_),p=a(38),h=a.n(p),x=a(1),g=c.a.forwardRef((function(e,t){var a=e.className,n=e.text,c=e.onClick,s=e.href,r=e.disabled;return Object(x.jsx)("div",{className:j()(h.a.animatedButton,a,Object(m.a)({},h.a.disabled,r)),children:Object(x.jsxs)("div",{className:h.a.animatedButtonInnerWrapper,children:[Object(x.jsx)("div",{className:h.a.animatedButtonBgContainer}),Object(x.jsx)("button",{children:Object(x.jsx)("a",{href:s,ref:t,onClick:c,role:"none",children:n})})]})})}));g.defaultProps={className:"",text:"",onClick:function(){},href:null,disabled:!1},g.propTypes={className:O.a.string,text:O.a.string,onClick:O.a.func,href:O.a.string,disabled:O.a.bool};var I=g,B="/",v="/game",C="/leaderboard",P=function(e){return e.username},k=function(e){return e.isGameMode},S=function(e){return e.isPaused},y=function(e){return e.moves},R=function(e){return e.time},T=a(20),M={setUsername:Object(T.a)("setUsername"),setIsGameMode:Object(T.a)("setIsGameMode"),setIsPaused:Object(T.a)("setIsPaused"),setMoves:Object(T.a)("setMoves"),setTime:Object(T.a)("setTime")},N=a(50),L=a.n(N),G=function(){var e=Object(o.b)(),t=Object(o.c)(P),a=c.a.useRef(),n=c.a.useRef(),s=c.a.useState(!1),r=Object(f.a)(s,2),i=r[0],u=r[1],d=null===t||void 0===t?void 0:t.length,l=!d&&!i,b=c.a.useCallback((function(){e(M.setUsername(null))}),[e]),m=c.a.useCallback((function(){a.current&&a.current.focus()}),[]),_=c.a.useCallback((function(e){e.preventDefault(),n.current&&n.current.click()}),[]);return c.a.useEffect(m,[m]),c.a.useEffect(b,[b]),Object(x.jsx)("main",{className:L.a.mainPage,children:Object(x.jsxs)("form",{onSubmit:_,children:[Object(x.jsx)("h1",{children:"15 Puzzle"}),Object(x.jsxs)("div",{className:j()(L.a.inputWrapper,{withError:l}),"data-validate":"Username is reauired",children:[Object(x.jsx)("input",{type:"text",name:"username",placeholder:"Type your username",onChange:function(t){return e(M.setUsername(t.target.value))},onFocus:function(){return u(!0)},onBlur:function(){return u(!1)},ref:a}),Object(x.jsx)("span",{"data-symbol":"\uf206"})]}),Object(x.jsx)(I,{text:"Start Game",href:v,ref:n,disabled:!d})]})})},E=a(29),A=a.n(E),z=a(35),w=a(58),D=a.n(w),U=a(4),W=a.n(U),F=a(110),q=a(109),J=a(108),Y=a(106),V=a(107),X=a(105),Z=function(e){var t=e.title,a=e.body,n=e.confirmButton,s=e.discardButton,r=e.delayMS,o=W.a.isNumber(r)&&r>0,i=c.a.useState(!o),u=Object(f.a)(i,2),d=u[0],l=u[1],b=c.a.useCallback((function(){o&&setTimeout((function(){l(!0)}),r)}),[r,o]),j=c.a.useCallback((function(){l(!1),W.a.isFunction(null===n||void 0===n?void 0:n.onClick)&&n.onClick.apply(n,arguments)}),[n]),m=c.a.useCallback((function(){l(!1),W.a.isFunction(null===s||void 0===s?void 0:s.onClick)&&s.onClick.apply(s,arguments)}),[s]);return c.a.useEffect(b,[b]),Object(x.jsxs)(q.a,{open:d,onClose:function(){return l(!1)},children:[Object(x.jsx)(X.a,{id:"alert-dialog-title",children:t||""}),Object(x.jsx)(Y.a,{children:Object(x.jsx)(V.a,{id:"alert-dialog-description",children:a||""})}),(n||s)&&Object(x.jsxs)(J.a,{children:[s&&Object(x.jsx)(F.a,{onClick:m,color:"primary",children:s.text||""}),n&&Object(x.jsx)(F.a,{onClick:j,color:"primary",autoFocus:!0,children:n.text||""})]})]})};Z.defaultProps={title:"",body:"",confirmButton:null,discardButton:null,delayMS:0};var Q=Z,H=W.a.reduce({CONFIGURATION:"/configuration",RECORD:"/record",LEADERBOARD:"/leaderboard"},(function(e,t,a){return e[a]="".concat("https://fifteen-puzzle-server.herokuapp.com/api").concat(t),e}),{}),K=function(e){return W.a.replace(new Date(e).toUTCString(),/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},$=a(33),ee=a.n($),te=function(e){var t,a=e.className,n=e.restartGame,s=Object(o.b)(),r=Object(o.c)(y),i=Object(o.c)(k),u=Object(o.c)(S),d=c.a.useRef(i&&!u),l=c.a.useMemo((function(){return Date.now()}),[]),b=c.a.useState(),_=Object(f.a)(b,2),O=_[0],p=_[1],h=c.a.useState(0),g=Object(f.a)(h,2),B=g[0],v=g[1],C=Object(o.c)(R),P=c.a.useCallback((function(){setTimeout((function(){d.current&&s(M.setTime(Date.now()-l-B))}),500)}),[s,l,B]),T=c.a.useCallback((function(){d.current=i&&!u}),[i,u]),N=c.a.useCallback((function(){p(Date.now()),s(M.setIsPaused(!0))}),[s]),L=c.a.useCallback((function(){v(B+(Date.now()-O)),s(M.setIsPaused(!1))}),[s,O,B]);return c.a.useEffect(P,[P,C]),c.a.useEffect(T,[T]),Object(x.jsxs)("div",{className:j()(ee.a.stats,a),children:[Object(x.jsxs)("div",{className:ee.a.actions,children:[Object(x.jsx)(I,{className:ee.a.restartButton,text:"Restart",onClick:n}),Object(x.jsx)(I,{className:j()((t={},Object(m.a)(t,ee.a.pauseButton,!u),Object(m.a)(t,ee.a.resumeButton,u),t)),text:u?"Resume":"Pause",onClick:u?L:N,disabled:!i})]}),Object(x.jsxs)("span",{children:[Object(x.jsx)("h4",{children:K(C)}),Object(x.jsx)("h4",{children:"Moves: ".concat(r)})]})]})};te.defaultProps={className:"",restartGame:function(){}};var ae=te,ne=a(37),ce=a(47),se=a.n(ce),re=Math.pow(4,2),oe=Math.pow(6,2),ie=W.a.times(oe,(function(){return-1})),ue=W.a.times(re,(function(e){return e})),de=W.a.times(re,(function(e){return(e+1)%re})),le=function(e){return 7+6*Math.floor(e/4)+e%4},fe=function(e){var t=e.initialConfiguration,a=e.onSolveCallback,n=Object(o.b)(),s=Object(u.g)(),r=Object(o.c)(y),i=c.a.useMemo((function(){return W.a.isArray(t)&&W.a.chain(t).sortBy().isEqual(ue).value()}),[t]),d=c.a.useState(t),l=Object(f.a)(d,2),b=l[0],_=l[1],O=c.a.useMemo((function(){return(e=b)?W.a.reduce(e,(function(e,t,a){return e[le(a)]=t,e}),Object(ne.a)(ie)):ie;var e}),[b]),p=c.a.useCallback((function(){i||s.push(B)}),[s,i]),h=c.a.useCallback((function(){i&&n(M.setIsGameMode(!0))}),[n,i]),g=c.a.useCallback((function(){n(M.setIsGameMode(!1)),a()}),[n,a]),I=c.a.useCallback((function(e){var t=le(e);return{top:{index:t-6,tile:O[t-6]},right:{index:t+1,tile:O[t+1]},bottom:{index:t+6,tile:O[t+6]},left:{index:t-1,tile:O[t-1]}}}),[O]),v=c.a.useCallback((function(e){var t=Number(e.target.dataset.tile),a=Number(e.target.dataset.index);if(!(0===t)){var c=I(a);if(W.a.some(c,(function(e){return 0===e.tile}))){var s=Object(ne.a)(b);s[W.a.findIndex(b,(function(e){return 0===e}))]=t,s[a]=0,_(s),n(M.setMoves(r+1)),W.a.isEqual(s,de)&&g()}}}),[b,n,I,r,g]);return c.a.useEffect(p,[p]),c.a.useEffect(h,[h]),Object(x.jsx)("div",{className:se.a.board,"data-id":"board",children:W.a.map(b,(function(e,t){return Object(x.jsx)("div",{role:"none",className:j()(se.a.tile,Object(m.a)({},se.a.empty,0===e)),"data-index":t,"data-tile":e,onClick:v,children:e},W.a.uniqueId(t))}))})};fe.defaultProps={initialConfiguration:[],onSolveCallback:function(){}};var be,je,me=c.a.memo(fe),_e=a(39),Oe=a.n(_e),pe=function(){var e,t=Object(o.b)(),a=Object(u.g)(),n=Object(o.d)(),s=Object(o.c)(P),r=Object(o.c)(S),i=c.a.useState(),d=Object(f.a)(i,2),l=d[0],b=d[1],_=c.a.useState(!1),O=Object(f.a)(_,2),p=O[0],h=O[1],g=c.a.useCallback((function(){s||a.push(B)}),[a,s]),I=c.a.useCallback(Object(z.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(H.CONFIGURATION,{"Content-Type":"application/json"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data,b(n);case 8:case"end":return e.stop()}}),e)}))),[]),v=c.a.useCallback((function(){t(M.setIsGameMode(!1)),t(M.setIsPaused(!1)),t(M.setMoves(0)),t(M.setTime(0)),h(!1),b(null),I()}),[t,I]),k=c.a.useCallback(Object(z.a)(A.a.mark((function e(){var t,a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=n.getState(),a=y(t),c=R(t),e.next=6,fetch(H.RECORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{username:s,moves:a,time:c}})});case 6:case"end":return e.stop()}}),e)}))),[n,s]),T=c.a.useCallback((function(){a.push(C),a.go()}),[a]);return c.a.useEffect(g,[g]),c.a.useEffect(v,[v]),Object(x.jsxs)("main",{className:j()(Oe.a.gamePage,(e={},Object(m.a)(e,Oe.a.puzzleSolved,p),Object(m.a)(e,Oe.a.gamePaused,r),e)),children:[Object(x.jsx)("h1",{children:l?"Game on, ".concat(s,"!"):"Loading..."}),l&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ae,{className:Oe.a.stats,restartGame:v}),Object(x.jsx)(me,{initialConfiguration:l,onSolveCallback:k})]}),p&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(D.a,{gravity:.4,run:!0,numberOfPieces:400}),Object(x.jsx)(Q,{title:"Amazing!",body:"You finally solved it... Much respect",confirmButton:{text:"Play again!",onClick:v},discardButton:{text:"Go to leaderboard",onClick:T},delayMS:2e3})]})]})},he=a(53),xe=a.n(he),ge=function(){var e=Object(o.c)(P),t=e?"Play Again":"Play",a=e?v:B,n=c.a.useState(),s=Object(f.a)(n,2),r=s[0],i=s[1],u=c.a.useCallback(Object(z.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(H.LEADERBOARD);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data,i(n);case 8:case"end":return e.stop()}}),e)}))),[]);return c.a.useEffect(u,[u]),Object(x.jsxs)("main",{className:xe.a.leaderboardPage,children:[Object(x.jsx)("h1",{children:r?"Leaderboard":"Loading..."}),r&&(W.a.isEmpty(r)?Object(x.jsx)("h3",{children:"No stats yet... Better hurry up and play!"}):Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Username"}),Object(x.jsx)("th",{children:"Moves"}),Object(x.jsx)("th",{children:"Time"})]})}),Object(x.jsx)("tbody",{children:W.a.map(r,(function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.username}),Object(x.jsx)("td",{children:e.moves}),Object(x.jsx)("td",{children:K(e.time)})]},W.a.uniqueId(e.username))}))})]})),r&&Object(x.jsx)(I,{className:xe.a.actionButton,text:t,href:a})]})},Ie=a(27),Be=a(54),ve=a(59),Ce=a.n(ve),Pe=Object(Ie.b)({username:Object(T.b)(M.setUsername,{defaultState:null}),isGameMode:Object(T.b)(M.setIsGameMode,{defaultState:!1}),isPaused:Object(T.b)(M.setIsPaused,{defaultState:!1}),moves:Object(T.b)(M.setMoves,{defaultState:0}),time:Object(T.b)(M.setTime,{defaultState:0})}),ke={key:"root",version:"1",storage:Ce.a},Se=function(){if(!be||!je){var e=Object(Be.a)(ke,Pe);be=Object(Ie.c)(e,{},(t=[],Ie.a.apply(void 0,Object(ne.a)(t)))),je=Object(Be.b)(be)}var t;return{store:be,persistor:je}}(),ye=Se.store,Re=Se.persistor,Te=Object(d.hot)((function(){return Object(x.jsx)(o.a,{store:ye,children:Object(x.jsx)(l.a,{loading:null,persistor:Re,children:Object(x.jsx)(i.a,{children:Object(x.jsxs)(u.d,{children:[Object(x.jsx)(u.b,{path:B,exact:!0,component:G}),Object(x.jsx)(u.b,{path:v,exact:!0,component:pe}),Object(x.jsx)(u.b,{path:C,exact:!0,component:ge}),Object(x.jsx)(u.a,{to:B})]})})})})}));r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(Te,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.2a613839.chunk.js.map