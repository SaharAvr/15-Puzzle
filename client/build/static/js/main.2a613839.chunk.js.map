{"version":3,"sources":["pages/GamePage/components/Stats.scss","shared/components/AnimatedButton/AnimatedButton.scss","pages/GamePage/GamePage.scss","pages/GamePage/components/Board.scss","pages/MainPage/MainPage.scss","pages/LeaderboardPage/LeaderboardPage.scss","index.scss","shared/components/AnimatedButton/AnimatedButton.js","shared/routes/consts.js","shared/selectors/selectors.js","store/actions.js","pages/MainPage/MainPage.js","shared/components/AlertDialog.js","shared/rest/restUrls.js","shared/utils/timeUtils.js","pages/GamePage/components/Stats.js","pages/GamePage/components/Board.js","store/init.js","pages/GamePage/GamePage.js","pages/LeaderboardPage/LeaderboardPage.js","store/reducer.js","App.js","index.js"],"names":["module","exports","AnimatedButton","React","forwardRef","ref","className","text","onClick","href","disabled","classNames","styles","animatedButton","animatedButtonInnerWrapper","animatedButtonBgContainer","role","defaultProps","propTypes","PropTypes","string","func","bool","pathNames","selectUsername","state","username","selectIsGameMode","isGameMode","selectIsPaused","isPaused","selectMoves","moves","selectTime","time","setUsername","makeActionCreator","setIsGameMode","setIsPaused","setMoves","setTime","MainPage","dispatch","useDispatch","useSelector","inputRef","useRef","startButtonLinkRef","useState","isInputFocused","setIsInputFocused","isInputValid","length","showInputError","resetUsernameOnLoad","useCallback","actions","focusInputOnLoad","current","focus","onSubmit","e","preventDefault","click","useEffect","mainPage","inputWrapper","withError","data-validate","type","name","placeholder","onChange","target","value","onFocus","onBlur","data-symbol","AlertDialog","title","body","confirmButton","discardButton","delayMS","showAfterDelay","_","isNumber","isOpen","setIsOpen","openDialogAfterDelay","setTimeout","onConfirm","isFunction","onDiscard","Dialog","open","onClose","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","color","autoFocus","restUrls","reduce","CONFIGURATION","RECORD","LEADERBOARD","res","key","process","replace","Date","toUTCString","Stats","restartGame","timeRef","startTime","useMemo","now","pauseClickTime","setPauseClickTime","totalPauseTimeCount","setTotalPauseTimeCount","totalPlayTimeCount","updateTime","updateTimeRef","pauseGame","resumeGame","stats","restartButton","pauseButton","resumeButton","timeUtils","puzzleSize","paddedPuzzleSize","puzzleSideSize","emptyPaddedConfiguration","times","sortedValidConfiguration","num","finalConfiguration","transformToPaddedIndex","index","paddedPuzzleSideSize","Math","floor","Board","initialConfiguration","onSolveCallback","history","useHistory","isInitialConfigutaionValid","isArray","chain","sortBy","isEqual","currentConfiguration","setCurrentConfiguration","paddedConfiguration","configuration","tile","redirectOutIfConfigurationInvalid","push","startGameIfConfigurationValid","onSolve","getPaddedTileNeighbors","tileIndex","paddedTileIndex","top","right","bottom","left","onTileClick","Number","dataset","paddedTileNeighbors","some","nextConfiguration","findIndex","board","data-id","map","empty","data-index","data-tile","uniqueId","store","persistor","memo","GamePage","useStore","setInitialConfiguration","didSolvePuzzle","setDidSolvePuzzle","redirectOutIfUsernameInvalid","loadInitialConfiguration","a","fetch","response","json","data","getState","method","headers","JSON","stringify","goToLeaderboardPage","go","gamePage","puzzleSolved","gamePaused","gravity","run","numberOfPieces","LeaderboardPage","actionButtonText","actionButtonHref","leaderboardStats","setLeaderboardStats","loadLeaderboard","leaderboardPage","isEmpty","actionButton","combineReducers","makeReducer","defaultState","persistConfig","version","storage","persistedReducer","persistReducer","reducer","createStore","middlewares","applyMiddleware","persistStore","initStore","hot","loading","path","exact","component","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2a613839.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"stats\":\"Stats_stats__1IUkc\",\"actions\":\"Stats_actions__2IFRh\",\"restartButton\":\"Stats_restartButton__D5qSn\",\"pauseButton\":\"Stats_pauseButton__1zDLY\",\"resumeButton\":\"Stats_resumeButton__DdX4D\",\"fadeIn\":\"Stats_fadeIn__NZRyw\",\"fadeInBottomTop\":\"Stats_fadeInBottomTop__281pc\",\"fadeInLeftRight\":\"Stats_fadeInLeftRight__1d-jt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"animatedButton\":\"AnimatedButton_animatedButton__1SurT\",\"animatedButtonInnerWrapper\":\"AnimatedButton_animatedButtonInnerWrapper__1RucT\",\"animatedButtonBgContainer\":\"AnimatedButton_animatedButtonBgContainer__E2Lzh\",\"disabled\":\"AnimatedButton_disabled__34BNW\",\"fadeIn\":\"AnimatedButton_fadeIn__3rQW2\",\"fadeInBottomTop\":\"AnimatedButton_fadeInBottomTop__2_raM\",\"fadeInLeftRight\":\"AnimatedButton_fadeInLeftRight__1qWH9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gamePage\":\"GamePage_gamePage__RkYJb\",\"fadeIn\":\"GamePage_fadeIn__1W9Zx\",\"puzzleSolved\":\"GamePage_puzzleSolved__2oQkb\",\"gamePaused\":\"GamePage_gamePaused__v3GrE\",\"stats\":\"GamePage_stats__zYTP1\",\"fadeInBottomTop\":\"GamePage_fadeInBottomTop__3i44h\",\"fadeInLeftRight\":\"GamePage_fadeInLeftRight__lVcuh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"board\":\"Board_board__2S2tZ\",\"tile\":\"Board_tile__17Cgp\",\"empty\":\"Board_empty__37PVI\",\"fadeIn\":\"Board_fadeIn__1yWUA\",\"fadeInBottomTop\":\"Board_fadeInBottomTop__3R-1Y\",\"fadeInLeftRight\":\"Board_fadeInLeftRight__SPWXL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainPage\":\"MainPage_mainPage__JXrbz\",\"inputWrapper\":\"MainPage_inputWrapper__3mTBc\",\"fadeIn\":\"MainPage_fadeIn__bB1cu\",\"fadeInBottomTop\":\"MainPage_fadeInBottomTop__3NoA8\",\"fadeInLeftRight\":\"MainPage_fadeInLeftRight__2XBc-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"leaderboardPage\":\"LeaderboardPage_leaderboardPage__1VFxE\",\"fadeIn\":\"LeaderboardPage_fadeIn__G-A7Z\",\"actionButton\":\"LeaderboardPage_actionButton__3KS0i\",\"fadeInBottomTop\":\"LeaderboardPage_fadeInBottomTop__1VgP3\",\"fadeInLeftRight\":\"LeaderboardPage_fadeInLeftRight__183ml\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fadeIn\":\"index_fadeIn__38lkY\",\"fadeInBottomTop\":\"index_fadeInBottomTop__2JA79\",\"fadeInLeftRight\":\"index_fadeInLeftRight__7Tlft\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport styles from './AnimatedButton.scss';\n\nconst AnimatedButton = React.forwardRef(({\n  className,\n  text,\n  onClick,\n  href,\n  disabled,\n}, ref) => (\n  \n  <div\n    className={classNames(styles.animatedButton, className, {\n      [styles.disabled]: disabled,\n    })}\n  >\n    <div className={styles.animatedButtonInnerWrapper}>\n      <div className={styles.animatedButtonBgContainer}/>\n      <button>\n        <a {...{ href, ref, onClick, role: 'none' }}>\n          {text}\n        </a>\n      </button>\n    </div>\n  </div>\n\n));\n\nAnimatedButton.defaultProps = {\n  className: '',\n  text: '',\n  onClick() {},\n  href: null,\n  disabled: false,\n};\n\nAnimatedButton.propTypes = {\n  className: PropTypes.string,\n  text: PropTypes.string,\n  onClick: PropTypes.func,\n  href: PropTypes.string,\n  disabled: PropTypes.bool,\n};\n\nexport default AnimatedButton;\n","export const pathNames = {\n  MAIN: '/',\n  GAME: '/game',\n  LEADERBOARD: '/leaderboard',\n};\n","export const selectUsername = state => state.username;\nexport const selectIsGameMode = state => state.isGameMode;\nexport const selectIsPaused = state => state.isPaused;\nexport const selectMoves = state => state.moves;\nexport const selectTime = state => state.time;\n","import { makeActionCreator } from 'redux-toolbelt';\n\nexport default {\n  setUsername: makeActionCreator('setUsername'),\n  setIsGameMode: makeActionCreator('setIsGameMode'),\n  setIsPaused: makeActionCreator('setIsPaused'),\n  setMoves: makeActionCreator('setMoves'),\n  setTime: makeActionCreator('setTime'),\n};\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\n\nimport AnimatedButton from 'shared/components/AnimatedButton';\nimport { pathNames } from 'shared/routes/consts';\nimport { selectUsername } from 'shared/selectors';\nimport actions from 'store/actions';\n\nimport styles from './MainPage.scss';\n\nconst MainPage = () => {\n\n  const dispatch = useDispatch();\n  const username = useSelector(selectUsername);\n\n  const inputRef = React.useRef();\n  const startButtonLinkRef = React.useRef();\n  const [isInputFocused, setIsInputFocused] = React.useState(false);\n  \n  const isInputValid = username?.length;\n  const showInputError = (!isInputValid && !isInputFocused);\n  \n  const resetUsernameOnLoad = React.useCallback(() => {\n\n    dispatch(actions.setUsername(null));\n\n  }, [dispatch]);\n\n  const focusInputOnLoad = React.useCallback(() => {\n\n    if (!inputRef.current) {\n      return;\n    }\n\n    inputRef.current.focus();\n\n  }, []);\n\n  const onSubmit = React.useCallback(e => {\n\n    e.preventDefault();\n    \n    if (!startButtonLinkRef.current) {\n      return;\n    }\n\n    startButtonLinkRef.current.click();\n\n  }, []);\n\n  React.useEffect(focusInputOnLoad, [focusInputOnLoad]);\n\n  React.useEffect(resetUsernameOnLoad, [resetUsernameOnLoad]);\n\n  return (\n    <main className={styles.mainPage}>\n\n      <form onSubmit={onSubmit}>\n        \n        <h1>15 Puzzle</h1>\n\n        <div\n          className={classNames(styles.inputWrapper, {\n            withError: showInputError,\n          })}\n          data-validate=\"Username is reauired\"\n        >\n          <input\n            type=\"text\"\n            name=\"username\"\n            placeholder=\"Type your username\"\n            onChange={e => dispatch(actions.setUsername(e.target.value))}\n            onFocus={() => setIsInputFocused(true)}\n            onBlur={() => setIsInputFocused(false)}\n            ref={inputRef}\n          />\n          <span data-symbol=\"&#xf206;\"/>\n        </div>\n\n        <AnimatedButton\n          text=\"Start Game\"\n          href={pathNames.GAME}\n          ref={startButtonLinkRef}\n          disabled={!isInputValid}\n        />\n\n      </form>\n\n    </main>\n  );\n\n};\n\nexport default MainPage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nconst AlertDialog = ({\n  title,\n  body,\n  confirmButton,\n  discardButton,\n  delayMS,\n}) => {\n\n  const showAfterDelay = (_.isNumber(delayMS) && delayMS > 0);\n  const [isOpen, setIsOpen] = React.useState(!showAfterDelay);\n\n  const openDialogAfterDelay = React.useCallback(() => {\n\n    if (!showAfterDelay) {\n      return;\n    }\n\n    setTimeout(() => {\n      setIsOpen(true);\n    }, delayMS);\n    \n  }, [delayMS, showAfterDelay]);\n\n  const onConfirm = React.useCallback((...args) => {\n\n    setIsOpen(false);\n\n    if (_.isFunction(confirmButton?.onClick)) {\n      confirmButton.onClick(...args);\n    }\n\n  }, [confirmButton]);\n\n  const onDiscard = React.useCallback((...args) => {\n\n    setIsOpen(false);\n\n    if (_.isFunction(discardButton?.onClick)) {\n      discardButton.onClick(...args);\n    }\n\n  }, [discardButton]);\n\n  React.useEffect(openDialogAfterDelay, [openDialogAfterDelay]);\n\n  return (\n    <Dialog open={isOpen} onClose={() => setIsOpen(false)}>\n\n      <DialogTitle id=\"alert-dialog-title\">\n        {title || ''}\n      </DialogTitle>\n\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {body || ''}\n        </DialogContentText>\n      </DialogContent>\n\n      {(confirmButton || discardButton) && (\n        <DialogActions>\n          {discardButton && (\n            <Button onClick={onDiscard} color=\"primary\">\n              {discardButton.text || ''}\n            </Button>\n          )}\n          {confirmButton && (\n            <Button onClick={onConfirm} color=\"primary\" autoFocus>\n              {confirmButton.text || ''}\n            </Button>\n          )}\n        </DialogActions>\n      )}\n      \n    </Dialog>\n  );\n\n};\n\nAlertDialog.defaultProps = {\n  title: '',\n  body: '',\n  confirmButton: null,\n  discardButton: null,\n  delayMS: 0,\n};\n\nAlertDialog.propTypes = {\n  title: PropTypes.string,\n  body: PropTypes.string,\n  confirmButton: PropTypes.shape({\n    text: PropTypes.string,\n    onClick: PropTypes.func,\n  }),\n  discardButton: PropTypes.shape({\n    text: PropTypes.string,\n    onClick: PropTypes.func,\n  }),\n  delayMS: PropTypes.number,\n};\n\nexport default AlertDialog;\n","import _ from 'lodash';\n\nconst endpoints = {\n  CONFIGURATION: '/configuration',\n  RECORD: '/record',\n  LEADERBOARD: '/leaderboard',\n};\n\nconst restUrls = _.reduce(endpoints, (res, value, key) => {\n  res[key] = `${process.env.REACT_APP_API_BASE}${value}`;\n  return res;\n}, {});\n\nexport default restUrls;\n","import _ from 'lodash';\n\nexport default {\n  formatTime: time => _.replace((new Date(time)).toUTCString(), /.*(\\d{2}:\\d{2}:\\d{2}).*/, '$1'),\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport AnimatedButton from 'shared/components/AnimatedButton';\nimport { selectIsGameMode, selectIsPaused, selectMoves, selectTime } from 'shared/selectors';\nimport timeUtils from 'shared/utils/timeUtils';\nimport actions from 'store/actions';\n\nimport styles from './Stats.scss';\n\nconst Stats = ({ className, restartGame }) => {\n  \n  const dispatch = useDispatch();\n\n  const moves = useSelector(selectMoves);\n  const isGameMode = useSelector(selectIsGameMode);\n  const isPaused = useSelector(selectIsPaused);\n\n  const timeRef = React.useRef(isGameMode && !isPaused);\n\n  const startTime = React.useMemo(() => Date.now(), []);\n  const [pauseClickTime, setPauseClickTime] = React.useState();\n  const [totalPauseTimeCount, setTotalPauseTimeCount] = React.useState(0);\n  const totalPlayTimeCount = useSelector(selectTime);\n\n  const updateTime = React.useCallback(() => {\n\n    setTimeout(() => {\n\n      if (!timeRef.current) {\n        return;\n      }\n     \n      dispatch(actions.setTime((Date.now() - startTime) - totalPauseTimeCount));\n\n    }, 500);\n\n  }, [dispatch, startTime, totalPauseTimeCount]);\n\n  const updateTimeRef = React.useCallback(() => {\n\n    timeRef.current = (isGameMode && !isPaused);\n\n  }, [isGameMode, isPaused]);\n\n  const pauseGame = React.useCallback(() => {\n\n    setPauseClickTime(Date.now());\n    dispatch(actions.setIsPaused(true));\n\n  }, [dispatch]);\n\n  const resumeGame = React.useCallback(() => {\n\n    setTotalPauseTimeCount(totalPauseTimeCount + (Date.now() - pauseClickTime));\n    dispatch(actions.setIsPaused(false));\n\n  }, [dispatch, pauseClickTime, totalPauseTimeCount]);\n\n  React.useEffect(updateTime, [updateTime, totalPlayTimeCount]);\n\n  React.useEffect(updateTimeRef, [updateTimeRef]);\n\n  return (\n    <div className={classNames(styles.stats, className)}>\n\n      <div className={styles.actions}>\n        <AnimatedButton\n          className={styles.restartButton}\n          text=\"Restart\"\n          onClick={restartGame}\n        />\n        <AnimatedButton\n          className={classNames({\n            [styles.pauseButton]: !isPaused,\n            [styles.resumeButton]: isPaused,\n          })}\n          text={isPaused ? 'Resume' : 'Pause'}\n          onClick={isPaused ? resumeGame : pauseGame}\n          disabled={!isGameMode}\n        />\n      </div>\n\n      <span>\n        <h4>{timeUtils.formatTime(totalPlayTimeCount)}</h4>\n        <h4>{`Moves: ${moves}`}</h4>\n      </span>\n\n    </div>\n  );\n\n};\n\nStats.defaultProps = {\n  className: '',\n  restartGame() {},\n};\n\nStats.propTypes = {\n  className: PropTypes.string,\n  restartGame: PropTypes.func,\n};\n\nexport default Stats;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport _ from 'lodash';\n\nimport { pathNames } from 'shared/routes/consts';\nimport { selectMoves } from 'shared/selectors';\nimport actions from 'store/actions';\n\nimport styles from './Board.scss';\n\nconst puzzleSideSize = 4;\nconst paddedPuzzleSideSize = (puzzleSideSize + 2);\nconst puzzleSize = (puzzleSideSize ** 2);\nconst paddedPuzzleSize = (paddedPuzzleSideSize ** 2);\n\nconst emptyPaddedConfiguration = _.times(paddedPuzzleSize, () => -1);\nconst sortedValidConfiguration = _.times(puzzleSize, num => num);\nconst finalConfiguration = _.times(puzzleSize, num => ((num + 1) % puzzleSize));\n\nconst transformToPaddedIndex = index => (\n  (paddedPuzzleSideSize + 1) +\n  (paddedPuzzleSideSize * Math.floor(index / puzzleSideSize)) +\n  (index % puzzleSideSize)\n);\n\nconst padConfiguration = configuration => {\n\n  if (!configuration) {\n    return emptyPaddedConfiguration;\n  }\n\n  return _.reduce(configuration, (res, tile, index) => {\n    res[transformToPaddedIndex(index)] = tile;\n    return res;\n  }, [...emptyPaddedConfiguration]);\n\n};\n\nconst Board = ({ initialConfiguration, onSolveCallback }) => {\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const moves = useSelector(selectMoves);\n\n  const isInitialConfigutaionValid = React.useMemo(() => (\n    _.isArray(initialConfiguration) &&\n    _.chain(initialConfiguration).sortBy().isEqual(sortedValidConfiguration).value()\n  ), [initialConfiguration]);\n\n  const [currentConfiguration, setCurrentConfiguration] = React.useState(initialConfiguration);\n  const paddedConfiguration = React.useMemo(() => padConfiguration(currentConfiguration), [currentConfiguration]);\n\n  const redirectOutIfConfigurationInvalid = React.useCallback(() => {\n\n    if (isInitialConfigutaionValid) {\n      return;\n    }\n\n    history.push(pathNames.MAIN);\n        \n  }, [history, isInitialConfigutaionValid]);\n\n  const startGameIfConfigurationValid = React.useCallback(() => {\n    \n    if (!isInitialConfigutaionValid) {\n      return;\n    }\n\n    dispatch(actions.setIsGameMode(true));\n    \n  }, [dispatch, isInitialConfigutaionValid]);\n\n  const onSolve = React.useCallback(() => {\n\n    dispatch(actions.setIsGameMode(false));\n    onSolveCallback();\n\n  }, [dispatch, onSolveCallback]);\n\n  const getPaddedTileNeighbors = React.useCallback(tileIndex => {\n\n    const paddedTileIndex = transformToPaddedIndex(tileIndex);\n      \n    return {\n      top: {\n        index: (paddedTileIndex - paddedPuzzleSideSize),\n        tile: paddedConfiguration[(paddedTileIndex - paddedPuzzleSideSize)],\n      },\n      right: {\n        index: (paddedTileIndex + 1),\n        tile: paddedConfiguration[(paddedTileIndex + 1)],\n      },\n      bottom: {\n        index: (paddedTileIndex + paddedPuzzleSideSize),\n        tile: paddedConfiguration[(paddedTileIndex + paddedPuzzleSideSize)],\n      },\n      left: {\n        index: (paddedTileIndex - 1),\n        tile: paddedConfiguration[(paddedTileIndex - 1)],\n      },\n    };\n\n  }, [paddedConfiguration]);\n  \n  const onTileClick = React.useCallback(e => {\n    \n    const tile = Number(e.target.dataset.tile);\n    const tileIndex = Number(e.target.dataset.index);\n\n    const isEmptyTile = (tile === 0);\n    if (isEmptyTile) {\n      return;\n    }\n\n    const paddedTileNeighbors = getPaddedTileNeighbors(tileIndex);\n\n    const isEmptyTileNeighbor = _.some(paddedTileNeighbors, ({ tile: neighborTile }) => neighborTile === 0);\n    if (!isEmptyTileNeighbor) {\n      return;\n    }\n\n    const nextConfiguration = [...currentConfiguration];\n    const emptyTileIndex = _.findIndex(currentConfiguration, value => (value === 0));\n\n    nextConfiguration[emptyTileIndex] = tile;\n    nextConfiguration[tileIndex] = 0;\n\n    setCurrentConfiguration(nextConfiguration);\n    dispatch(actions.setMoves(moves + 1));\n\n    const isPuzzleSolved = _.isEqual(nextConfiguration, finalConfiguration);\n    if (isPuzzleSolved) {\n      onSolve();\n    }\n    \n  }, [currentConfiguration, dispatch, getPaddedTileNeighbors, moves, onSolve]);\n\n  React.useEffect(redirectOutIfConfigurationInvalid, [redirectOutIfConfigurationInvalid]);\n\n  React.useEffect(startGameIfConfigurationValid, [startGameIfConfigurationValid]);\n\n  return (\n    <div className={styles.board} data-id=\"board\">\n\n      {_.map(currentConfiguration, (tile, index) => (\n        <div\n          role=\"none\"\n          key={_.uniqueId(index)}\n          className={classNames(styles.tile, {\n            [styles.empty]: (tile === 0),\n          })}\n          data-index={index}\n          data-tile={tile}\n          onClick={onTileClick}\n        >\n          {tile}\n        </div>\n      ))}\n\n    </div>\n  );\n\n};\n\nBoard.defaultProps = {\n  initialConfiguration: [],\n  onSolveCallback() {},\n};\n\nBoard.propTypes = {\n  initialConfiguration: PropTypes.arrayOf(PropTypes.number),\n  onSolveCallback: PropTypes.func,\n};\n\nexport default React.memo(Board);\n","import { applyMiddleware, createStore } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\n\nimport reducer from './reducer';\n  \nlet store;\nlet persistor;\n\nconst persistConfig = {\n  key: 'root',\n  version: '1',\n  storage,\n};\n\nconst bindMiddlewares = middlewares => {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line global-require\n    const { composeWithDevTools } = require('redux-devtools-extension');\n    return composeWithDevTools(applyMiddleware(...middlewares));\n  }\n  return applyMiddleware(...middlewares);\n};\n\nexport default () => {\n\n  if (!store || !persistor) {\n\n    const persistedReducer = persistReducer(persistConfig, reducer);\n\n    store = createStore(persistedReducer, {}, bindMiddlewares([]));\n    persistor = persistStore(store);\n\n  }\n  \n  return { store, persistor };\n  \n};\n","import React from 'react';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport Confetti from 'react-confetti';\nimport classNames from 'classnames';\n\nimport AlertDialog from 'shared/components/AlertDialog';\nimport { pathNames } from 'shared/routes/consts';\nimport { selectUsername, selectMoves, selectTime, selectIsPaused } from 'shared/selectors';\nimport restUrls from 'shared/rest/restUrls';\nimport actions from 'store/actions';\n\nimport Stats from './components/Stats';\nimport Board from './components/Board';\nimport styles from './GamePage.scss';\n\nconst GamePage = () => {\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const store = useStore();\n  const username = useSelector(selectUsername);\n  const isPaused = useSelector(selectIsPaused);\n\n  const [initialConfiguration, setInitialConfiguration] = React.useState();\n  const [didSolvePuzzle, setDidSolvePuzzle] = React.useState(false);\n\n  const redirectOutIfUsernameInvalid = React.useCallback(() => {\n    \n    if (username) {\n      return;\n    }\n    \n    history.push(pathNames.MAIN);\n\n  }, [history, username]);\n\n  const loadInitialConfiguration = React.useCallback(async () => {\n\n    const response = await fetch(restUrls.CONFIGURATION, {\n      'Content-Type': 'application/json',\n    });\n    const { data } = await response.json();\n\n    setInitialConfiguration(data);\n\n  }, []);\n\n  const restartGame = React.useCallback(() => {\n\n    dispatch(actions.setIsGameMode(false));\n    dispatch(actions.setIsPaused(false));\n    dispatch(actions.setMoves(0));\n    dispatch(actions.setTime(0));\n    setDidSolvePuzzle(false);\n    setInitialConfiguration(null);\n    loadInitialConfiguration();\n\n  }, [dispatch, loadInitialConfiguration]);\n\n  const onSolveCallback = React.useCallback(async () => {\n    \n    setDidSolvePuzzle(true);\n\n    const state = store.getState();\n    const moves = selectMoves(state);\n    const time = selectTime(state);\n    \n    await fetch(restUrls.RECORD, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        data: { username, moves, time },\n      }),\n    });\n    \n  }, [store, username]);\n\n  const goToLeaderboardPage = React.useCallback(() => {\n\n    history.push(pathNames.LEADERBOARD);\n    history.go();\n\n  }, [history]);\n\n  React.useEffect(redirectOutIfUsernameInvalid, [redirectOutIfUsernameInvalid]);\n\n  React.useEffect(restartGame, [restartGame]);\n\n  return (\n    <main\n      className={classNames(styles.gamePage, {\n        [styles.puzzleSolved]: didSolvePuzzle,\n        [styles.gamePaused]: isPaused,\n      })}\n    >\n\n      <h1>{initialConfiguration ? `Game on, ${username}!` : 'Loading...'}</h1>\n      \n      {initialConfiguration && (\n        <>\n          <Stats {...{ className: styles.stats, restartGame }}/>\n          <Board {...{ initialConfiguration, onSolveCallback }}/>\n        </>\n      )}\n      \n      {didSolvePuzzle && (\n        <>\n          <Confetti\n            gravity={0.4}\n            run\n            numberOfPieces={400}\n          />\n          <AlertDialog\n            title=\"Amazing!\"\n            body=\"You finally solved it... Much respect\"\n            confirmButton={{\n              text: 'Play again!',\n              onClick: restartGame,\n            }}\n            discardButton={{\n              text: 'Go to leaderboard',\n              onClick: goToLeaderboardPage,\n            }}\n            delayMS={2000}\n          />\n        </>\n      )}\n\n    </main>\n  );\n\n};\n\nexport default GamePage;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport _ from 'lodash';\n\nimport AnimatedButton from 'shared/components/AnimatedButton';\nimport restUrls from 'shared/rest/restUrls';\nimport { pathNames } from 'shared/routes/consts';\nimport { selectUsername } from 'shared/selectors';\nimport timeUtils from 'shared/utils/timeUtils';\n\nimport styles from './LeaderboardPage.scss';\n\nconst LeaderboardPage = () => {\n\n  const username = useSelector(selectUsername);\n  \n  const actionButtonText = (username ? 'Play Again' : 'Play');\n  const actionButtonHref = (username ? pathNames.GAME : pathNames.MAIN);\n\n  const [leaderboardStats, setLeaderboardStats] = React.useState();\n\n  const loadLeaderboard = React.useCallback(async () => {\n\n    const response = await fetch(restUrls.LEADERBOARD);\n    const { data } = await response.json();\n\n    setLeaderboardStats(data);\n\n  }, []);\n\n  React.useEffect(loadLeaderboard, [loadLeaderboard]);\n\n  return (\n    <main\n      className={styles.leaderboardPage}\n    >\n\n      <h1>{leaderboardStats ? 'Leaderboard' : 'Loading...'}</h1>\n\n      {leaderboardStats && (_.isEmpty(leaderboardStats) ? (\n        <h3>No stats yet... Better hurry up and play!</h3>\n      ) : (\n        <table>\n\n          <thead>\n            <tr>\n              <th>Username</th>\n              <th>Moves</th>\n              <th>Time</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {_.map(leaderboardStats, stats => (\n              <tr key={_.uniqueId(stats.username)}>\n                <td>{stats.username}</td>\n                <td>{stats.moves}</td>\n                <td>{timeUtils.formatTime(stats.time)}</td>\n              </tr>\n            ))}\n          </tbody>\n\n        </table>\n      ))}\n\n      {leaderboardStats && (\n        <AnimatedButton\n          className={styles.actionButton}\n          text={actionButtonText}\n          href={actionButtonHref}\n        />\n      )}\n\n    </main>\n  );\n\n};\n\nexport default LeaderboardPage;\n","import { combineReducers } from 'redux';\nimport { makeReducer } from 'redux-toolbelt';\n\nimport actions from './actions';\n\nexport default combineReducers({\n  username: makeReducer(actions.setUsername, { defaultState: null }),\n  isGameMode: makeReducer(actions.setIsGameMode, { defaultState: false }),\n  isPaused: makeReducer(actions.setIsPaused, { defaultState: false }),\n  moves: makeReducer(actions.setMoves, { defaultState: 0 }),\n  time: makeReducer(actions.setTime, { defaultState: 0 }),\n});\n","import React from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport { hot } from 'react-hot-loader/root';\nimport { PersistGate } from 'redux-persist/integration/react';\n\nimport MainPage from 'pages/MainPage';\nimport GamePage from 'pages/GamePage';\nimport LeaderboardPage from 'pages/LeaderboardPage';\nimport { pathNames } from 'shared/routes/consts';\n\nimport initStore from './store/init';\n\nconst { store, persistor } = initStore();\n\nconst App = () => (\n  <ReduxProvider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <Router>\n        <Switch>\n          <Route path={pathNames.MAIN} exact component={MainPage}/>\n          <Route path={pathNames.GAME} exact component={GamePage}/>\n          <Route path={pathNames.LEADERBOARD} exact component={LeaderboardPage}/>\n          <Redirect to={pathNames.MAIN}/>\n        </Switch>\n      </Router>\n    </PersistGate>\n  </ReduxProvider>\n);\n\nexport default hot(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}