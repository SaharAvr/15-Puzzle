(this["webpackJsonp15-puzzle"]=this["webpackJsonp15-puzzle"]||[]).push([[0],{26:function(e,t,a){e.exports={board:"BoardView_board__KqKuR",tile:"BoardView_tile__1lHja",empty:"BoardView_empty__1kLRI",top:"BoardView_top__2kG_U",moveTop:"BoardView_moveTop__2vLv-",right:"BoardView_right__39vBT",moveRight:"BoardView_moveRight__1nLrT",bottom:"BoardView_bottom__2l7JN",moveBottom:"BoardView_moveBottom__3wavr",left:"BoardView_left__1x1CM",moveLeft:"BoardView_moveLeft__32S2t",withCheats:"BoardView_withCheats__1s-15",swap:"BoardView_swap__1gxIa",flicker:"BoardView_flicker__35UQg",selected:"BoardView_selected__2tDTE",fadeIn:"BoardView_fadeIn__o-Gud",fadeInBottomTop:"BoardView_fadeInBottomTop__1Njci",fadeInLeftRight:"BoardView_fadeInLeftRight__F-s1e"}},36:function(e,t,a){e.exports={stats:"Stats_stats__3gBwN",actions:"Stats_actions__1QOC0",restartButton:"Stats_restartButton__1UNvd",pauseButton:"Stats_pauseButton__1pDxZ",resumeButton:"Stats_resumeButton__2_GFM",fadeIn:"Stats_fadeIn__Zoumi",fadeInBottomTop:"Stats_fadeInBottomTop__bVIlK",fadeInLeftRight:"Stats_fadeInLeftRight__1u6oK",flicker:"Stats_flicker__2qIBR"}},40:function(e,t,a){e.exports={animatedButton:"AnimatedButton_animatedButton__1SurT",animatedButtonInnerWrapper:"AnimatedButton_animatedButtonInnerWrapper__1RucT",animatedButtonBgContainer:"AnimatedButton_animatedButtonBgContainer__E2Lzh",disabled:"AnimatedButton_disabled__34BNW",fadeIn:"AnimatedButton_fadeIn__3rQW2",fadeInBottomTop:"AnimatedButton_fadeInBottomTop__2_raM",fadeInLeftRight:"AnimatedButton_fadeInLeftRight__1qWH9",flicker:"AnimatedButton_flicker__2D1cG"}},41:function(e,t,a){e.exports={gamePage:"GamePage_gamePage__RkYJb",fadeIn:"GamePage_fadeIn__1W9Zx",puzzleSolved:"GamePage_puzzleSolved__2oQkb",gamePaused:"GamePage_gamePaused__v3GrE",stats:"GamePage_stats__zYTP1",fadeInBottomTop:"GamePage_fadeInBottomTop__3i44h",fadeInLeftRight:"GamePage_fadeInLeftRight__lVcuh",flicker:"GamePage_flicker__1dmU7"}},49:function(e,t,a){e.exports={leaderboardPage:"LeaderboardPage_leaderboardPage__1VFxE",withFade:"LeaderboardPage_withFade__2YmSN",fadeInBottomTop:"LeaderboardPage_fadeInBottomTop__1VgP3",fadeIn:"LeaderboardPage_fadeIn__G-A7Z",actionButton:"LeaderboardPage_actionButton__3KS0i",fadeInLeftRight:"LeaderboardPage_fadeInLeftRight__183ml",flicker:"LeaderboardPage_flicker__1sT0C"}},52:function(e,t,a){e.exports={mainPage:"MainPage_mainPage__JXrbz",inputWrapper:"MainPage_inputWrapper__3mTBc",fadeIn:"MainPage_fadeIn__bB1cu",fadeInBottomTop:"MainPage_fadeInBottomTop__3NoA8",fadeInLeftRight:"MainPage_fadeInLeftRight__2XBc-",flicker:"MainPage_flicker__32H5o"}},74:function(e,t,a){e.exports={fadeIn:"index_fadeIn__38lkY",fadeInBottomTop:"index_fadeInBottomTop__2JA79",fadeInLeftRight:"index_fadeInLeftRight__7Tlft",flicker:"index_flicker__1MeR_"}},84:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),i=a.n(r),o=(a(74),a(10)),s=a(43),u=a(9),l=a(63),d=a(58),f=a(13),b=a(18),m=a.n(b),j=a(16),_=a(5),h=a.n(_),O=a(40),p=a.n(O),v=a(1),x=c.a.forwardRef((function(e,t){var a=e.className,n=e.text,c=e.onClick,r=e.href,i=e.disabled;return Object(v.jsx)("div",{className:m()(p.a.animatedButton,a,Object(j.a)({},p.a.disabled,i)),children:Object(v.jsxs)("div",{className:p.a.animatedButtonInnerWrapper,children:[Object(v.jsx)("div",{className:p.a.animatedButtonBgContainer}),Object(v.jsx)("button",{children:Object(v.jsx)("a",{href:r,ref:t,onClick:c,role:"none",children:n})})]})})}));x.defaultProps={className:"",text:"",onClick:function(){},href:null,disabled:!1},x.propTypes={className:h.a.string,text:h.a.string,onClick:h.a.func,href:h.a.string,disabled:h.a.bool};var g=x,C="/",B="/game",k="/leaderboard",I=function(e){return e.username},P=function(e){return e.isGameMode},w=function(e){return e.isPaused},y=function(e){return e.moves},T=function(e){return e.time},N=a(23),S={setUsername:Object(N.a)("setUsername"),setIsGameMode:Object(N.a)("setIsGameMode"),setIsPaused:Object(N.a)("setIsPaused"),setMoves:Object(N.a)("setMoves"),setTime:Object(N.a)("setTime")},E=a(52),R=a.n(E),M=function(){var e=Object(o.b)(),t=Object(o.c)(I),a=c.a.useRef(),n=c.a.useRef(),r=c.a.useState(!1),i=Object(f.a)(r,2),s=i[0],u=i[1],l=null===t||void 0===t?void 0:t.length,d=!l&&!s,b=c.a.useCallback((function(){e(S.setUsername(null))}),[e]),j=c.a.useCallback((function(){a.current&&a.current.focus()}),[]),_=c.a.useCallback((function(e){e.preventDefault(),n.current&&n.current.click()}),[]);return c.a.useEffect(j,[j]),c.a.useEffect(b,[b]),Object(v.jsx)("main",{className:R.a.mainPage,children:Object(v.jsxs)("form",{onSubmit:_,children:[Object(v.jsx)("h1",{children:"15 Puzzle"}),Object(v.jsxs)("div",{className:m()(R.a.inputWrapper,{withError:d}),"data-validate":"Username is reauired",children:[Object(v.jsx)("input",{type:"text",name:"username",placeholder:"Type your username",onChange:function(t){return e(S.setUsername(t.target.value))},onFocus:function(){return u(!0)},onBlur:function(){return u(!1)},ref:a}),Object(v.jsx)("span",{"data-symbol":"\uf206"})]}),Object(v.jsx)(g,{text:"Start Game",href:B,ref:n,disabled:!l})]})})},L=a(32),G=a.n(L),A=a(38),V=a(59),z=a.n(V),D=a(2),F=a.n(D),U=a(113),W=a(112),q=a(111),J=a(109),H=a(110),K=a(108),Y=function(e){var t=e.title,a=e.body,n=e.confirmButton,r=e.discardButton,i=e.delayMS,o=F.a.isNumber(i)&&i>0,s=c.a.useState(!o),u=Object(f.a)(s,2),l=u[0],d=u[1],b=c.a.useCallback((function(){o&&setTimeout((function(){d(!0)}),i)}),[i,o]),m=c.a.useCallback((function(){d(!1),F.a.isFunction(null===n||void 0===n?void 0:n.onClick)&&n.onClick.apply(n,arguments)}),[n]),j=c.a.useCallback((function(){d(!1),F.a.isFunction(null===r||void 0===r?void 0:r.onClick)&&r.onClick.apply(r,arguments)}),[r]);return c.a.useEffect(b,[b]),Object(v.jsxs)(W.a,{open:l,onClose:function(){return d(!1)},children:[Object(v.jsx)(K.a,{id:"alert-dialog-title",children:t||""}),Object(v.jsx)(J.a,{children:Object(v.jsx)(H.a,{id:"alert-dialog-description",children:a||""})}),(n||r)&&Object(v.jsxs)(q.a,{children:[r&&Object(v.jsx)(U.a,{onClick:j,color:"primary",children:r.text||""}),n&&Object(v.jsx)(U.a,{onClick:m,color:"primary",autoFocus:!0,children:n.text||""})]})]})};Y.defaultProps={title:"",body:"",confirmButton:null,discardButton:null,delayMS:0};var Q=Y,Z=F.a.reduce({CONFIGURATION:"/configuration",RECORD:"/record",LEADERBOARD:"/leaderboard"},(function(e,t,a){return e[a]="".concat("https://fifteen-puzzle-server.herokuapp.com/api").concat(t),e}),{}),X=function(e){return F.a.replace(new Date(e).toUTCString(),/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},$=a(36),ee=a.n($),te=function(e){var t,a=e.className,n=e.restartGame,r=Object(o.b)(),i=Object(o.c)(y),s=Object(o.c)(P),u=Object(o.c)(w),l=c.a.useRef(s&&!u),d=c.a.useMemo((function(){return Date.now()}),[]),b=c.a.useState(),_=Object(f.a)(b,2),h=_[0],O=_[1],p=c.a.useState(0),x=Object(f.a)(p,2),C=x[0],B=x[1],k=Object(o.c)(T),I=c.a.useCallback((function(){setTimeout((function(){l.current&&r(S.setTime(Date.now()-d-C))}),500)}),[r,d,C]),N=c.a.useCallback((function(){l.current=s&&!u}),[s,u]),E=c.a.useCallback((function(){O(Date.now()),r(S.setIsPaused(!0))}),[r]),R=c.a.useCallback((function(){B(C+(Date.now()-h)),r(S.setIsPaused(!1))}),[r,h,C]);return c.a.useEffect(I,[I,k]),c.a.useEffect(N,[N]),Object(v.jsxs)("div",{className:m()(ee.a.stats,a),children:[Object(v.jsxs)("div",{className:ee.a.actions,children:[Object(v.jsx)(g,{className:ee.a.restartButton,text:"Restart",onClick:n}),Object(v.jsx)(g,{className:m()((t={},Object(j.a)(t,ee.a.pauseButton,!u),Object(j.a)(t,ee.a.resumeButton,u),t)),text:u?"Resume":"Pause",onClick:u?R:E,disabled:!s})]}),Object(v.jsxs)("span",{children:[Object(v.jsx)("h4",{children:X(k)}),Object(v.jsx)("h4",{children:"Moves: ".concat(i)})]})]})};te.defaultProps={className:"",restartGame:function(){}};var ae=te,ne=a(22),ce=a(30),re={SWAP:"swap"},ie=F.a.chain(re).values().map((function(e){return F.a.size(e)})).max().value(),oe=function(){var e=c.a.useState({}),t=Object(f.a)(e,2),a=t[0],n=t[1],r=c.a.useState(""),i=Object(f.a)(r,2),o=i[0],s=i[1],u=c.a.useRef(o),l=c.a.useRef(),d=c.a.useCallback((function(){var e=document.addEventListener("keydown",(function(e){var t=e.key,a="".concat(u.current).concat(F.a.toLower(t)),n=a.substring(F.a.size(a)-ie);s(n),u.current=n}));return function(){return document.removeEventListener("keydown",e)}}),[]),b=c.a.useCallback((function(){if(!F.a.isEmpty(a)){if(!new RegExp(".*".concat(a.name,".*"),"i").test(o))return;return console.log("[CHEAT MODE OFF]"),n({}),void s("")}if(o){var e=F.a.find(re,(function(e){return new RegExp(".*".concat(e,".*")).test(o)}));e&&(console.log("CHEATER... ==> ".concat(F.a.toUpper(e))),n({name:e,data:null}),s(""))}}),[a,o]),m=c.a.useCallback((function(e){n(Object(ne.a)(Object(ne.a)({},a),{},{data:e}))}),[a]),j=c.a.useCallback((function(){o&&(l.current&&(clearTimeout(l.current),l.current=null),l.current=setTimeout((function(){s(""),u.current=""}),3e3))}),[o]);return c.a.useEffect(d,[d]),c.a.useEffect(b,[b]),c.a.useEffect(j,[j]),{activeCheat:a,setActiveCheatData:m}};oe.cheats=re;var se=oe,ue=a(26),le=a.n(ue),de=Math.pow(4,2),fe=Math.pow(6,2),be=(F.a.times(fe,(function(){return-1})),F.a.times(de,(function(e){return e}))),me=F.a.times(de,(function(e){return(e+1)%de})),je="top",_e="right",he="bottom",Oe="left",pe=function(e){return 6*(Math.floor(e/4)+1)+(e%4+1)},ve=function(e){return 4*(Math.floor(e/6)-1)+(e%6-1)},xe=function(e){var t=e.activeCheat,a=e.currentConfiguration,n=e.setCurrentConfiguration,c=e.nextConfiguration,r=e.onTileClick;return Object(v.jsx)("div",{className:le.a.board,"data-id":"board",children:F.a.map(a,(function(e,a){var i,o=e.value,s=e.className;return Object(v.jsx)("div",{role:"none","data-tile-index":a,"data-tile-value":o,onClick:r,className:m()(le.a.tile,s,(i={},Object(j.a)(i,le.a.withCheats,!F.a.isEmpty(t)),Object(j.a)(i,le.a[t.name],t.name),i)),onAnimationEnd:function(){n(c)},children:o},F.a.uniqueId(a))}))})};xe.defaultProps={activeCheat:{}};var ge=xe,Ce=function(e){var t=e.initialConfiguration,a=e.onSolveCallback,n=se(),r=n.activeCheat,i=n.setActiveCheatData,s=Object(o.b)(),l=Object(u.g)(),d=Object(o.c)(y),b=c.a.useMemo((function(){return F.a.isArray(t)&&F.a.chain(t).sortBy().isEqual(be).value()}),[t]),m=c.a.useMemo((function(){return e=t,F.a.map(e,(function(e){return{value:e,className:0===e?le.a.empty:""}}));var e}),[t]),j=c.a.useState(m),_=Object(f.a)(j,2),h=_[0],O=_[1],p=c.a.useState([]),x=Object(f.a)(p,2),g=x[0],B=x[1],k=c.a.useCallback((function(){b||l.push(C)}),[l,b]),I=c.a.useCallback((function(){b&&s(S.setIsGameMode(!0))}),[s,b]),P=c.a.useCallback((function(){s(S.setIsGameMode(!1)),a()}),[s,a]),w=c.a.useCallback((function(e){var t=F.a.findIndex(h,{value:0}),a=function(e){var t,a=e.tileIndex,n=e.emptyTileIndex,c=e.includeCurrentIndex,r=pe(a),i=pe(n),o=Math.floor((r-6)/6),s=4-r%6,u=Math.floor((fe-6-r)/6),l=r%6-1,d=i<r?i<r-l?je:Oe:i>r?i>r+s?he:_e:void 0,f=!1;if(d===je&&(t=F.a.chain(o).times((function(e){if(!f){var t=ve(r-6*(e+1));if(t!==n)return t;f=!0}})).compact().value()),d===_e&&(t=F.a.chain(s).times((function(e){if(!f){var t=ve(r+(e+1));if(t!==n)return t;f=!0}})).compact().value()),d===he&&(t=F.a.chain(u).times((function(e){if(!f){var t=ve(r+6*(e+1));if(t!==n)return t;f=!0}})).compact().value()),d===Oe&&(t=F.a.chain(l).times((function(e){if(!f){var t=ve(r-(e+1));if(t!==n)return t;f=!0}})).compact().value()),f)return c&&t.unshift(a),{side:d,indexes:t}}({tileIndex:e,emptyTileIndex:t,includeCurrentIndex:!0})||{};if(!F.a.isEmpty(a)){var n=a.side,c=a.indexes,r=function(){var e=Object(ce.a)(h);return F.a.forEach(c,(function(t){e[t].className=le.a[n]})),e}(),i=function(){var e=Object(ce.a)(h),a=F.a.size(c);return F.a.forEach(c,(function(n,r){0===r&&(e[n]={value:0,className:le.a.empty}),r<a-1?e[c[r+1]]=Object(ne.a)(Object(ne.a)({},h[n]),{},{className:""}):e[t]=Object(ne.a)(Object(ne.a)({},h[n]),{},{className:""})})),e}();return O(r),B(i),s(S.setMoves(d+1)),i}}),[h,s,d]),T=c.a.useCallback((function(e,t){var a=Object(ce.a)(h);return a[e]=Object(ne.a)(Object(ne.a)({},h[t]),{},{className:""}),a[t]=Object(ne.a)(Object(ne.a)({},h[e]),{},{className:""}),B(a),s(S.setMoves(d+1)),a}),[h,s,d]),N=c.a.useCallback((function(e){var t=Number(e.target.dataset.tileIndex);if(!(0===Number(e.target.dataset.tileValue))){var a,n=function(){if(F.a.isEmpty(r))return w(t);var e=r||{},a=e.name,n=e.data;if(a===se.cheats.SWAP){if(!(!F.a.isNil(n)&&n!==t)){var c=Object(ce.a)(h);return c[t].className=le.a.selected,O(c),void i(t)}var o=T(t,n);return i(null),O(o),o}return h}();F.a.isEqual((a=n,F.a.map(a,"value")),me)&&P()}}),[r,h,w,P,i,T]);return c.a.useEffect(k,[k]),c.a.useEffect(I,[I]),Object(v.jsx)(ge,{activeCheat:r,currentConfiguration:h,setCurrentConfiguration:O,nextConfiguration:g,onTileClick:N})};Ce.defaultProps={initialConfiguration:[],onSolveCallback:function(){}};var Be,ke,Ie=c.a.memo(Ce),Pe=a(41),we=a.n(Pe),ye=function(){var e,t=Object(o.b)(),a=Object(u.g)(),n=Object(o.d)(),r=Object(o.c)(I),i=Object(o.c)(w),s=c.a.useState(),l=Object(f.a)(s,2),d=l[0],b=l[1],_=c.a.useState(!1),h=Object(f.a)(_,2),O=h[0],p=h[1],x=c.a.useCallback((function(){r||a.push(C)}),[a,r]),g=c.a.useCallback(Object(A.a)(G.a.mark((function e(){var t,a,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Z.CONFIGURATION,{"Content-Type":"application/json"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data,b(n);case 8:case"end":return e.stop()}}),e)}))),[]),B=c.a.useCallback((function(){t(S.setIsGameMode(!1)),t(S.setIsPaused(!1)),t(S.setMoves(0)),t(S.setTime(0)),p(!1),b(null),g()}),[t,g]),P=c.a.useCallback(Object(A.a)(G.a.mark((function e(){var t,a,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),t=n.getState(),a=y(t),c=T(t),e.next=6,fetch(Z.RECORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{username:r,moves:a,time:c}})});case 6:case"end":return e.stop()}}),e)}))),[n,r]),N=c.a.useCallback((function(){a.push(k)}),[a]);return c.a.useEffect(x,[x]),c.a.useEffect(B,[B]),Object(v.jsxs)("main",{className:m()(we.a.gamePage,(e={},Object(j.a)(e,we.a.puzzleSolved,O),Object(j.a)(e,we.a.gamePaused,i),e)),children:[Object(v.jsx)("h1",{children:d?"Game on, ".concat(r,"!"):"Loading..."}),d&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ae,{className:we.a.stats,restartGame:B}),Object(v.jsx)(Ie,{initialConfiguration:d,onSolveCallback:P})]}),O&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z.a,{gravity:.4,run:!0,numberOfPieces:400}),Object(v.jsx)(Q,{title:"Amazing!",body:"You finally solved it... Much respect",confirmButton:{text:"Play again!",onClick:B},discardButton:{text:"Go to leaderboard",onClick:N},delayMS:2e3})]})]})},Te=a(49),Ne=a.n(Te),Se=function(){var e=Object(o.c)(I),t=e?"Play Again":"Play",a=e?B:C,n=c.a.useState(),r=Object(f.a)(n,2),i=r[0],s=r[1],u=c.a.useCallback(Object(A.a)(G.a.mark((function e(){var t,a,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Z.LEADERBOARD);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data,s(n);case 8:case"end":return e.stop()}}),e)}))),[]);return c.a.useEffect(u,[u]),Object(v.jsxs)("main",{className:Ne.a.leaderboardPage,children:[Object(v.jsx)("h1",{className:m()(Object(j.a)({},Ne.a.withFade,i&&!F.a.isEmpty(i))),children:i?"Leaderboard":"Loading..."}),i&&(F.a.isEmpty(i)?Object(v.jsx)("h3",{children:"No stats yet... Better hurry up and play!"}):Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Username"}),Object(v.jsx)("th",{children:"Moves"}),Object(v.jsx)("th",{children:"Time"})]})}),Object(v.jsx)("tbody",{children:F.a.map(i,(function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.username}),Object(v.jsx)("td",{children:e.moves}),Object(v.jsx)("td",{children:X(e.time)})]},F.a.uniqueId(e.username))}))})]})),i&&Object(v.jsx)(g,{className:Ne.a.actionButton,text:t,href:a})]})},Ee=a(60),Re=a(61),Me=new(function(){function e(){Object(Ee.a)(this,e),this.instance=null}return Object(Re.a)(e,[{key:"init",value:function(){F.a.isFunction(window.hj)&&(this.instance=window.hj)}},{key:"trigger",value:function(e){this.instance&&this.instance("trigger",e)}}]),e}()),Le=function(){return c.a.useEffect((function(){Me.init()}),[]),null},Ge=a(29),Ae=a(55),Ve=a(62),ze=a.n(Ve),De=Object(Ge.b)({username:Object(N.b)(S.setUsername,{defaultState:null}),isGameMode:Object(N.b)(S.setIsGameMode,{defaultState:!1}),isPaused:Object(N.b)(S.setIsPaused,{defaultState:!1}),moves:Object(N.b)(S.setMoves,{defaultState:0}),time:Object(N.b)(S.setTime,{defaultState:0})}),Fe={key:"root",version:"1",storage:ze.a},Ue=function(){if(!Be||!ke){var e=Object(Ae.a)(Fe,De);Be=Object(Ge.c)(e,{},(t=[],Ge.a.apply(void 0,Object(ce.a)(t)))),ke=Object(Ae.b)(Be)}var t;return{store:Be,persistor:ke}}(),We=Ue.store,qe=Ue.persistor,Je=Object(l.hot)((function(){return Object(v.jsx)(o.a,{store:We,children:Object(v.jsxs)(d.a,{loading:null,persistor:qe,children:[Object(v.jsx)(s.a,{children:Object(v.jsxs)(u.d,{children:[Object(v.jsx)(u.b,{path:C,exact:!0,component:M}),Object(v.jsx)(u.b,{path:B,exact:!0,component:ye}),Object(v.jsx)(u.b,{path:k,exact:!0,component:Se}),Object(v.jsx)(u.a,{to:C})]})}),Object(v.jsx)(Le,{})]})})}));i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(Je,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.42c2a13f.chunk.js.map