(this["webpackJsonp15-puzzle"]=this["webpackJsonp15-puzzle"]||[]).push([[0],{29:function(e,t,a){e.exports={board:"Board_board__29-vl",tile:"Board_tile__3Ymhw",empty:"Board_empty__1gxMu",top:"Board_top__Ic1aJ",moveTop:"Board_moveTop__3xhjx",right:"Board_right__2_HCr",moveRight:"Board_moveRight__2By8J",bottom:"Board_bottom__1xtci",moveBottom:"Board_moveBottom__3gVCX",left:"Board_left__1L6g6",moveLeft:"Board_moveLeft__2oT5I",withCheats:"Board_withCheats__2v4dd",flicker:"Board_flicker__2CAXw",selected:"Board_selected__S5A-n",fadeIn:"Board_fadeIn__2lzj2",fadeInBottomTop:"Board_fadeInBottomTop__1-zR8",fadeInLeftRight:"Board_fadeInLeftRight__32TLr"}},36:function(e,t,a){e.exports={stats:"Stats_stats__3gBwN",actions:"Stats_actions__1QOC0",restartButton:"Stats_restartButton__1UNvd",pauseButton:"Stats_pauseButton__1pDxZ",resumeButton:"Stats_resumeButton__2_GFM",fadeIn:"Stats_fadeIn__Zoumi",fadeInBottomTop:"Stats_fadeInBottomTop__bVIlK",fadeInLeftRight:"Stats_fadeInLeftRight__1u6oK",flicker:"Stats_flicker__2qIBR"}},40:function(e,t,a){e.exports={animatedButton:"AnimatedButton_animatedButton__1SurT",animatedButtonInnerWrapper:"AnimatedButton_animatedButtonInnerWrapper__1RucT",animatedButtonBgContainer:"AnimatedButton_animatedButtonBgContainer__E2Lzh",disabled:"AnimatedButton_disabled__34BNW",fadeIn:"AnimatedButton_fadeIn__3rQW2",fadeInBottomTop:"AnimatedButton_fadeInBottomTop__2_raM",fadeInLeftRight:"AnimatedButton_fadeInLeftRight__1qWH9",flicker:"AnimatedButton_flicker__2D1cG"}},41:function(e,t,a){e.exports={gamePage:"GamePage_gamePage__RkYJb",fadeIn:"GamePage_fadeIn__1W9Zx",puzzleSolved:"GamePage_puzzleSolved__2oQkb",gamePaused:"GamePage_gamePaused__v3GrE",stats:"GamePage_stats__zYTP1",fadeInBottomTop:"GamePage_fadeInBottomTop__3i44h",fadeInLeftRight:"GamePage_fadeInLeftRight__lVcuh",flicker:"GamePage_flicker__1dmU7"}},51:function(e,t,a){e.exports={mainPage:"MainPage_mainPage__JXrbz",inputWrapper:"MainPage_inputWrapper__3mTBc",fadeIn:"MainPage_fadeIn__bB1cu",fadeInBottomTop:"MainPage_fadeInBottomTop__3NoA8",fadeInLeftRight:"MainPage_fadeInLeftRight__2XBc-",flicker:"MainPage_flicker__32H5o"}},54:function(e,t,a){e.exports={leaderboardPage:"LeaderboardPage_leaderboardPage__1VFxE",fadeIn:"LeaderboardPage_fadeIn__G-A7Z",actionButton:"LeaderboardPage_actionButton__3KS0i",fadeInBottomTop:"LeaderboardPage_fadeInBottomTop__1VgP3",fadeInLeftRight:"LeaderboardPage_fadeInLeftRight__183ml",flicker:"LeaderboardPage_flicker__1sT0C"}},72:function(e,t,a){e.exports={fadeIn:"index_fadeIn__38lkY",fadeInBottomTop:"index_fadeInBottomTop__2JA79",fadeInLeftRight:"index_fadeInLeftRight__7Tlft",flicker:"index_flicker__1MeR_"}},82:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),o=a.n(r),s=(a(72),a(10)),i=a(43),u=a(9),l=a(61),d=a(58),f=a(13),b=a(23),m=a.n(b),j=a(19),_=a(5),O=a.n(_),p=a(40),h=a.n(p),v=a(1),x=c.a.forwardRef((function(e,t){var a=e.className,n=e.text,c=e.onClick,r=e.href,o=e.disabled;return Object(v.jsx)("div",{className:m()(h.a.animatedButton,a,Object(j.a)({},h.a.disabled,o)),children:Object(v.jsxs)("div",{className:h.a.animatedButtonInnerWrapper,children:[Object(v.jsx)("div",{className:h.a.animatedButtonBgContainer}),Object(v.jsx)("button",{children:Object(v.jsx)("a",{href:r,ref:t,onClick:c,role:"none",children:n})})]})})}));x.defaultProps={className:"",text:"",onClick:function(){},href:null,disabled:!1},x.propTypes={className:O.a.string,text:O.a.string,onClick:O.a.func,href:O.a.string,disabled:O.a.bool};var g=x,B="/",C="/game",k="/leaderboard",I=function(e){return e.username},P=function(e){return e.isGameMode},S=function(e){return e.isPaused},T=function(e){return e.moves},y=function(e){return e.time},N=a(21),R={setUsername:Object(N.a)("setUsername"),setIsGameMode:Object(N.a)("setIsGameMode"),setIsPaused:Object(N.a)("setIsPaused"),setMoves:Object(N.a)("setMoves"),setTime:Object(N.a)("setTime")},M=a(51),E=a.n(M),L=function(){var e=Object(s.b)(),t=Object(s.c)(I),a=c.a.useRef(),n=c.a.useRef(),r=c.a.useState(!1),o=Object(f.a)(r,2),i=o[0],u=o[1],l=null===t||void 0===t?void 0:t.length,d=!l&&!i,b=c.a.useCallback((function(){e(R.setUsername(null))}),[e]),j=c.a.useCallback((function(){a.current&&a.current.focus()}),[]),_=c.a.useCallback((function(e){e.preventDefault(),n.current&&n.current.click()}),[]);return c.a.useEffect(j,[j]),c.a.useEffect(b,[b]),Object(v.jsx)("main",{className:E.a.mainPage,children:Object(v.jsxs)("form",{onSubmit:_,children:[Object(v.jsx)("h1",{children:"15 Puzzle"}),Object(v.jsxs)("div",{className:m()(E.a.inputWrapper,{withError:d}),"data-validate":"Username is reauired",children:[Object(v.jsx)("input",{type:"text",name:"username",placeholder:"Type your username",onChange:function(t){return e(R.setUsername(t.target.value))},onFocus:function(){return u(!0)},onBlur:function(){return u(!1)},ref:a}),Object(v.jsx)("span",{"data-symbol":"\uf206"})]}),Object(v.jsx)(g,{text:"Start Game",href:C,ref:n,disabled:!l})]})})},w=a(31),A=a.n(w),G=a(38),z=a(59),D=a.n(z),U=a(3),F=a.n(U),W=a(111),J=a(110),V=a(109),q=a(107),H=a(108),Y=a(106),K=function(e){var t=e.title,a=e.body,n=e.confirmButton,r=e.discardButton,o=e.delayMS,s=F.a.isNumber(o)&&o>0,i=c.a.useState(!s),u=Object(f.a)(i,2),l=u[0],d=u[1],b=c.a.useCallback((function(){s&&setTimeout((function(){d(!0)}),o)}),[o,s]),m=c.a.useCallback((function(){d(!1),F.a.isFunction(null===n||void 0===n?void 0:n.onClick)&&n.onClick.apply(n,arguments)}),[n]),j=c.a.useCallback((function(){d(!1),F.a.isFunction(null===r||void 0===r?void 0:r.onClick)&&r.onClick.apply(r,arguments)}),[r]);return c.a.useEffect(b,[b]),Object(v.jsxs)(J.a,{open:l,onClose:function(){return d(!1)},children:[Object(v.jsx)(Y.a,{id:"alert-dialog-title",children:t||""}),Object(v.jsx)(q.a,{children:Object(v.jsx)(H.a,{id:"alert-dialog-description",children:a||""})}),(n||r)&&Object(v.jsxs)(V.a,{children:[r&&Object(v.jsx)(W.a,{onClick:j,color:"primary",children:r.text||""}),n&&Object(v.jsx)(W.a,{onClick:m,color:"primary",autoFocus:!0,children:n.text||""})]})]})};K.defaultProps={title:"",body:"",confirmButton:null,discardButton:null,delayMS:0};var X=K,Z=F.a.reduce({CONFIGURATION:"/configuration",RECORD:"/record",LEADERBOARD:"/leaderboard"},(function(e,t,a){return e[a]="".concat("https://fifteen-puzzle-server.herokuapp.com/api").concat(t),e}),{}),Q=function(e){return F.a.replace(new Date(e).toUTCString(),/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},$=a(36),ee=a.n($),te=function(e){var t,a=e.className,n=e.restartGame,r=Object(s.b)(),o=Object(s.c)(T),i=Object(s.c)(P),u=Object(s.c)(S),l=c.a.useRef(i&&!u),d=c.a.useMemo((function(){return Date.now()}),[]),b=c.a.useState(),_=Object(f.a)(b,2),O=_[0],p=_[1],h=c.a.useState(0),x=Object(f.a)(h,2),B=x[0],C=x[1],k=Object(s.c)(y),I=c.a.useCallback((function(){setTimeout((function(){l.current&&r(R.setTime(Date.now()-d-B))}),500)}),[r,d,B]),N=c.a.useCallback((function(){l.current=i&&!u}),[i,u]),M=c.a.useCallback((function(){p(Date.now()),r(R.setIsPaused(!0))}),[r]),E=c.a.useCallback((function(){C(B+(Date.now()-O)),r(R.setIsPaused(!1))}),[r,O,B]);return c.a.useEffect(I,[I,k]),c.a.useEffect(N,[N]),Object(v.jsxs)("div",{className:m()(ee.a.stats,a),children:[Object(v.jsxs)("div",{className:ee.a.actions,children:[Object(v.jsx)(g,{className:ee.a.restartButton,text:"Restart",onClick:n}),Object(v.jsx)(g,{className:m()((t={},Object(j.a)(t,ee.a.pauseButton,!u),Object(j.a)(t,ee.a.resumeButton,u),t)),text:u?"Resume":"Pause",onClick:u?E:M,disabled:!i})]}),Object(v.jsxs)("span",{children:[Object(v.jsx)("h4",{children:Q(k)}),Object(v.jsx)("h4",{children:"Moves: ".concat(o)})]})]})};te.defaultProps={className:"",restartGame:function(){}};var ae=te,ne=a(32),ce=a(28),re={SWAP:"swap"},oe=F.a.chain(re).values().map((function(e){return F.a.size(e)})).max().value(),se=function(){var e=c.a.useState(),t=Object(f.a)(e,2),a=t[0],n=t[1],r=c.a.useState(""),o=Object(f.a)(r,2),s=o[0],i=o[1],u=c.a.useRef(s),l=c.a.useRef(),d=c.a.useCallback((function(){var e=document.addEventListener("keydown",(function(e){var t=e.key,a="".concat(u.current).concat(F.a.toLower(t)),n=a.substring(F.a.size(a)-oe);i(n),u.current=n}));return function(){return document.removeEventListener("keydown",e)}}),[]),b=c.a.useCallback((function(){if(a){if(!new RegExp(".*".concat(a.name,".*"),"i").test(s))return;return console.log("[CHEAT MODE OFF]"),n(null),void i("")}if(s){var e=F.a.find(re,(function(e){return new RegExp(".*".concat(e,".*")).test(s)}));e&&(console.log("CHEATER... ==> ".concat(F.a.toUpper(e))),n({name:e,data:null}),i(""))}}),[a,s]),m=c.a.useCallback((function(e){n(Object(ne.a)(Object(ne.a)({},a),{},{data:e}))}),[a]),j=c.a.useCallback((function(){s&&(l.current&&(clearTimeout(l.current),l.current=null),l.current=setTimeout((function(){i(""),u.current=""}),3e3))}),[s]);return c.a.useEffect(d,[d]),c.a.useEffect(b,[b]),c.a.useEffect(j,[j]),{activeCheat:a,setActiveCheatData:m}};se.cheats=re;var ie=se,ue=a(29),le=a.n(ue),de=Math.pow(4,2),fe=Math.pow(6,2),be=F.a.times(fe,(function(){return-1})),me=F.a.times(de,(function(e){return e})),je=F.a.times(de,(function(e){return(e+1)%de})),_e=function(e){return 7+6*Math.floor(e/4)+e%4},Oe=function(e){var t=e.initialConfiguration,a=e.onSolveCallback,n=ie(),r=n.activeCheat,o=n.setActiveCheatData,i=Object(s.b)(),l=Object(u.g)(),d=Object(s.c)(T),b=c.a.useMemo((function(){return F.a.isArray(t)&&F.a.chain(t).sortBy().isEqual(me).value()}),[t]),_=c.a.useMemo((function(){return e=t,F.a.map(e,(function(e){return{value:e,className:0===e?le.a.empty:""}}));var e}),[t]),O=c.a.useState(_),p=Object(f.a)(O,2),h=p[0],x=p[1],g=c.a.useState(),C=Object(f.a)(g,2),k=C[0],I=C[1],P=c.a.useMemo((function(){return(e=h)?F.a.reduce(e,(function(e,t,a){return e[_e(a)]=t,e}),Object(ce.a)(be)):be;var e}),[h]),S=c.a.useCallback((function(){b||l.push(B)}),[l,b]),y=c.a.useCallback((function(){b&&i(R.setIsGameMode(!0))}),[i,b]),N=c.a.useCallback((function(){i(R.setIsGameMode(!1)),a()}),[i,a]),M=c.a.useCallback((function(e){var t,a,n,c,r=_e(e);return{top:{index:r-6,value:null===(t=P[r-6])||void 0===t?void 0:t.value},right:{index:r+1,value:null===(a=P[r+1])||void 0===a?void 0:a.value},bottom:{index:r+6,value:null===(n=P[r+6])||void 0===n?void 0:n.value},left:{index:r-1,value:null===(c=P[r-1])||void 0===c?void 0:c.value}}}),[P]),E=c.a.useCallback((function(e){var t=e.tileIndex,a=e.tileValue,n=M(t),c=F.a.findKey(n,(function(e){return 0===e.value}));if(c){var r=Object(ce.a)(h);r[t]={value:a,className:le.a[c]},x(r);var o=Object(ce.a)(h);return o[F.a.findIndex(h,(function(e){return 0===e.value}))]={value:a,className:""},o[t]={value:0,className:le.a.empty},I(o),i(R.setMoves(d+1)),o}}),[h,i,M,d]),L=c.a.useCallback((function(e,t){var a=Object(ce.a)(h);return a[e]=Object(ne.a)(Object(ne.a)({},h[t]),{},{className:""}),a[t]=Object(ne.a)(Object(ne.a)({},h[e]),{},{className:""}),I(a),i(R.setMoves(d+1)),a}),[h,i,d]),w=c.a.useCallback((function(e){var t=Number(e.target.dataset.tileIndex),a=Number(e.target.dataset.tileValue);if(!(0===a)){var n,c=function(){if(!r)return E({tileIndex:t,tileValue:a});var e=r||{},n=e.name,c=e.data;if(n===ie.cheats.SWAP){if(!(!F.a.isNil(c)&&c!==t)){var s=Object(ce.a)(h);return s[t].className=le.a.selected,x(s),void o(t)}var i=L(t,c);return o(null),x(i),i}return h}();F.a.isEqual((n=c,F.a.map(n,"value")),je)&&N()}}),[r,h,E,N,o,L]);return c.a.useEffect(S,[S]),c.a.useEffect(y,[y]),Object(v.jsx)("div",{className:le.a.board,"data-id":"board",children:F.a.map(h,(function(e,t){var a=e.value,n=e.className;return Object(v.jsx)("div",{role:"none","data-tile-index":t,"data-tile-value":a,onClick:w,className:m()(le.a.tile,n,Object(j.a)({},le.a.withCheats,!F.a.isNil(r))),onAnimationEnd:function(){x(k)},children:a},F.a.uniqueId(t))}))})};Oe.defaultProps={initialConfiguration:[],onSolveCallback:function(){}};var pe,he,ve=c.a.memo(Oe),xe=a(41),ge=a.n(xe),Be=function(){var e,t=Object(s.b)(),a=Object(u.g)(),n=Object(s.d)(),r=Object(s.c)(I),o=Object(s.c)(S),i=c.a.useState(),l=Object(f.a)(i,2),d=l[0],b=l[1],_=c.a.useState(!1),O=Object(f.a)(_,2),p=O[0],h=O[1],x=c.a.useCallback((function(){r||a.push(B)}),[a,r]),g=c.a.useCallback(Object(G.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Z.CONFIGURATION,{"Content-Type":"application/json"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data,b(n);case 8:case"end":return e.stop()}}),e)}))),[]),C=c.a.useCallback((function(){t(R.setIsGameMode(!1)),t(R.setIsPaused(!1)),t(R.setMoves(0)),t(R.setTime(0)),h(!1),b(null),g()}),[t,g]),P=c.a.useCallback(Object(G.a)(A.a.mark((function e(){var t,a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=n.getState(),a=T(t),c=y(t),e.next=6,fetch(Z.RECORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{username:r,moves:a,time:c}})});case 6:case"end":return e.stop()}}),e)}))),[n,r]),N=c.a.useCallback((function(){a.push(k),a.go()}),[a]);return c.a.useEffect(x,[x]),c.a.useEffect(C,[C]),Object(v.jsxs)("main",{className:m()(ge.a.gamePage,(e={},Object(j.a)(e,ge.a.puzzleSolved,p),Object(j.a)(e,ge.a.gamePaused,o),e)),children:[Object(v.jsx)("h1",{children:d?"Game on, ".concat(r,"!"):"Loading..."}),d&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ae,{className:ge.a.stats,restartGame:C}),Object(v.jsx)(ve,{initialConfiguration:d,onSolveCallback:P})]}),p&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(D.a,{gravity:.4,run:!0,numberOfPieces:400}),Object(v.jsx)(X,{title:"Amazing!",body:"You finally solved it... Much respect",confirmButton:{text:"Play again!",onClick:C},discardButton:{text:"Go to leaderboard",onClick:N},delayMS:2e3})]})]})},Ce=a(54),ke=a.n(Ce),Ie=function(){var e=Object(s.c)(I),t=e?"Play Again":"Play",a=e?C:B,n=c.a.useState(),r=Object(f.a)(n,2),o=r[0],i=r[1],u=c.a.useCallback(Object(G.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Z.LEADERBOARD);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data,i(n);case 8:case"end":return e.stop()}}),e)}))),[]);return c.a.useEffect(u,[u]),Object(v.jsxs)("main",{className:ke.a.leaderboardPage,children:[Object(v.jsx)("h1",{children:o?"Leaderboard":"Loading..."}),o&&(F.a.isEmpty(o)?Object(v.jsx)("h3",{children:"No stats yet... Better hurry up and play!"}):Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Username"}),Object(v.jsx)("th",{children:"Moves"}),Object(v.jsx)("th",{children:"Time"})]})}),Object(v.jsx)("tbody",{children:F.a.map(o,(function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.username}),Object(v.jsx)("td",{children:e.moves}),Object(v.jsx)("td",{children:Q(e.time)})]},F.a.uniqueId(e.username))}))})]})),o&&Object(v.jsx)(g,{className:ke.a.actionButton,text:t,href:a})]})},Pe=a(27),Se=a(55),Te=a(60),ye=a.n(Te),Ne=Object(Pe.b)({username:Object(N.b)(R.setUsername,{defaultState:null}),isGameMode:Object(N.b)(R.setIsGameMode,{defaultState:!1}),isPaused:Object(N.b)(R.setIsPaused,{defaultState:!1}),moves:Object(N.b)(R.setMoves,{defaultState:0}),time:Object(N.b)(R.setTime,{defaultState:0})}),Re={key:"root",version:"1",storage:ye.a},Me=function(){if(!pe||!he){var e=Object(Se.a)(Re,Ne);pe=Object(Pe.c)(e,{},(t=[],Pe.a.apply(void 0,Object(ce.a)(t)))),he=Object(Se.b)(pe)}var t;return{store:pe,persistor:he}}(),Ee=Me.store,Le=Me.persistor,we=Object(l.hot)((function(){return Object(v.jsx)(s.a,{store:Ee,children:Object(v.jsx)(d.a,{loading:null,persistor:Le,children:Object(v.jsx)(i.a,{children:Object(v.jsxs)(u.d,{children:[Object(v.jsx)(u.b,{path:B,exact:!0,component:L}),Object(v.jsx)(u.b,{path:C,exact:!0,component:Be}),Object(v.jsx)(u.b,{path:k,exact:!0,component:Ie}),Object(v.jsx)(u.a,{to:B})]})})})})}));o.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(we,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.cfa4b05e.chunk.js.map